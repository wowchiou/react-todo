(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,t,n){e.exports={Signup:"Signup_Signup__HxM2G",wrap:"Signup_wrap__1M42O",title:"Signup_title__35SL0",loading:"Signup_loading__39rvN",btns:"Signup_btns__2zGiS",popup:"Signup_popup__3D6tu"}},15:function(e,t,n){e.exports={Signin:"Signin_Signin__29PCt",wrap:"Signin_wrap__3ftIN",title:"Signin_title__2oYXY",loading:"Signin_loading__1BwJT",btns:"Signin_btns__apeSs",popup:"Signin_popup__LnR_F"}},16:function(e,t,n){e.exports={Todo:"Todo_Todo__hx4er",addBar:"Todo_addBar__2eopu",loading:"Todo_loading__2SNz9"}},19:function(e,t,n){e.exports={error:"withErrorHandler_error__17OP8",show:"withErrorHandler_show__2-T-b",hide:"withErrorHandler_hide__uIUIb"}},20:function(e,t,n){e.exports={Done:"Done_Done__2gxwK",addBar:"Done_addBar__dBQmI",loading:"Done_loading__2T59t"}},21:function(e,t,n){e.exports={Backdrop:"Backdrop_Backdrop__haGuA",hide:"Backdrop_hide__YutH5",show:"Backdrop_show__3d7qs"}},25:function(e,t,n){e.exports={header:"Layout_header__2xoJq",logout:"Layout_logout__3vwyF"}},26:function(e,t,n){e.exports={NavItem:"NavItem_NavItem__aPQlA"}},27:function(e,t,n){e.exports={Input:"Input_Input__mWMod",error:"Input_error__57kT7"}},28:function(e,t,n){e.exports={TodoList:"TodoList_TodoList__W7Ezu",nothing:"TodoList_nothing__2Hm--"}},29:function(e,t,n){e.exports={TodoItem:"TodoItem_TodoItem__1TRFF",btns:"TodoItem_btns__1zLCr"}},30:function(e,t,n){e.exports={loading:"Loading_loading__utX7h","lds-ring":"Loading_lds-ring__1K9EY"}},31:function(e,t,n){e.exports={Modal:"Modal_Modal__2-3xg",fadeInDown:"Modal_fadeInDown__3qMva",close:"Modal_close__3Bb7f"}},42:function(e,t,n){e.exports={Button:"Button_Button__3Is6j"}},45:function(e,t,n){e.exports={Navigation:"Navigation_Navigation__1E364"}},46:function(e,t,n){e.exports={Card:"Card_Card__ReLmv"}},47:function(e,t,n){e.exports=n(76)},52:function(e,t,n){},76:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(18),o=n.n(c),u=n(12),l=(n(52),n(11)),s=n(1),i=n.n(s),d=n(5),p=n(2),m=n(4),f=n(16),v=n.n(f),g=n(10),h=n.n(g),E="AIzaSyAzWGnKUYY8e6g9oASL90g7tj4TjoVCRGg",_=h.a.create({baseURL:"https://react-my-test-fb5ea.firebaseio.com/"}),b=function(e){var t;return i.a.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,i.a.awrap(h.a.post("https://identitytoolkit.googleapis.com/v1/accounts:signUp?key="+E,e));case 2:return t=n.sent,n.abrupt("return",t);case 4:case"end":return n.stop()}})},w=function(e){var t;return i.a.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,i.a.awrap(h.a.post("https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key="+E,e));case 2:return t=n.sent,n.abrupt("return",t);case 4:case"end":return n.stop()}})},O=function(){var e;return i.a.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.awrap(_.get("/todo/".concat(localStorage.getItem("userId"),".json")));case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}})},j=function(e){var t;return i.a.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,i.a.awrap(_.post("/todo/".concat(localStorage.getItem("userId"),".json"),e));case 2:return t=n.sent,n.abrupt("return",t);case 4:case"end":return n.stop()}})},y=function(e,t){var n;return i.a.async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i.a.awrap(_.put("/todo/".concat(localStorage.getItem("userId"),"/").concat(e,".json"),t));case 2:return n=a.sent,a.abrupt("return",n);case 4:case"end":return a.stop()}})},k=function(e){var t;return i.a.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,i.a.awrap(_.delete("/todo/".concat(localStorage.getItem("userId"),"/").concat(e,".json")));case 2:return t=n.sent,n.abrupt("return",t);case 4:case"end":return n.stop()}})},x=n(19),N=n.n(x),S=n(42),I=n.n(S),T=r.a.memo(function(e){return r.a.createElement("button",{className:I.a.Button,disabled:e.disabled,onClick:e.clicked},e.children)}),R=r.a.memo(T),D=function(e,t){return Object(p.a)({},e,{},t)},C=function(e,t){var n=!0;if(!t)return!0;if(t.required&&!(n=""!==e.trim()&&n))return!1;if(t.minLength&&!(n=e.length>=t.minLength&&n))return!1;if(t.isEmail){if(!(n=/[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/.test(e)&&n))return!1}return!0},L=function(e,t){return Object(l.g)(function(n){var c=function(e){var t=Object(a.useState)(null),n=Object(m.a)(t,2),r=n[0],c=n[1],o=e.interceptors.request.use(function(e){return c(null),e}),u=e.interceptors.response.use(function(e){return e},function(e){c(e)});return Object(a.useEffect)(function(){return function(){e.interceptors.request.eject(o),e.interceptors.response.eject(u)}},[e.interceptors.request,e.interceptors.response,o,u]),[r,Object(a.useCallback)(function(){c(null)},[])]}(t),o=Object(m.a)(c,2),u=o[0],l=o[1],s=[N.a.error];u?s.push(N.a.show):s.push(N.a.hide);var i="",d=!1;return u&&u.response?404===u.response.status?(i="\u7cfb\u7d71\u767c\u751f\u554f\u984c,\u8acb\u7a0d\u5019\u518d\u8a66",d=!0):i=u.response.data.error.message:i=u&&!u.response?"\u8acb\u78ba\u8a8d\u7db2\u8def\u9023\u7dda":"\u7cfb\u7d71\u767c\u751f\u554f\u984c,\u8acb\u7a0d\u5019\u518d\u8a66",r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:s.join(" ")},r.a.createElement("p",null,i),r.a.createElement(R,{clicked:d?function(){!function(e){localStorage.removeItem("idToken"),localStorage.removeItem("userId"),e.history.push("/signin")}(n)}:l},"\u78ba\u8a8d")),r.a.createElement(e,n))})},B=n(25),M=n.n(B),z=n(26),q=n.n(z),F=function(e){return r.a.createElement("li",{className:q.a.NavItem},r.a.createElement(u.b,{to:e.link,exact:e.exact,activeClassName:q.a.active},e.children))},P=n(45),A=n.n(P),H=function(){return r.a.createElement("ul",{className:A.a.Navigation},r.a.createElement(F,{link:"/",exact:!0},"TODO"),r.a.createElement(F,{link:"/done"},"Done"))},Y=Object(l.g)(function(e){return localStorage.getItem("idToken")||e.history.push("/signin"),r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:M.a.header},r.a.createElement(H,null),r.a.createElement("div",{className:M.a.logout},r.a.createElement(R,{clicked:function(){localStorage.removeItem("idToken"),localStorage.removeItem("userId"),e.history.push("/signin")}},"\u767b\u51fa"))),r.a.createElement("main",null,e.children))}),G=n(27),J=n.n(G),U=function(e){var t=[J.a.Input];!e.valid&&e.touch&&t.push(J.a.error);var n=r.a.createElement("p",null,"Input Error");switch(e.type){case"input":return r.a.createElement("input",Object.assign({className:t.join(" "),type:e.inputType,name:e.name},e.config,{value:e.value,onChange:e.changed}));case"select":case"textarea":return;default:return n}},W=n(28),K=n.n(W),Q=n(29),X=n.n(Q),$=function(e){var t;return t=e.done?r.a.createElement(R,{clicked:function(){e.onCanceled(e.itemId)}},"\u53d6\u6d88"):r.a.createElement(R,{clicked:function(){e.onFinished(e.itemId)}},"\u5b8c\u6210"),r.a.createElement("li",{className:X.a.TodoItem},r.a.createElement("p",null,e.item),r.a.createElement("div",{className:X.a.btns},t,r.a.createElement(R,{clicked:function(){e.onDeleted(e.itemId)}},"\u522a\u9664")))},V=function(e){var t=r.a.createElement("li",{className:K.a.nothing},"\u76ee\u524d\u7121\u4ee3\u8fa6\u4e8b\u9805");return e.list&&(t=Object.keys(e.list).map(function(t){if(e.list[t].isDone===e.done)return r.a.createElement($,{itemId:t,key:t,item:e.list[t].item,onFinished:e.onFinished,onDeleted:e.onDeleted,onCanceled:e.onCanceled,done:e.done})})),r.a.createElement("ul",{className:K.a.TodoList},t)},Z=n(30),ee=n.n(Z),te=function(){return r.a.createElement("div",{className:ee.a.Loading},r.a.createElement("div",{className:ee.a.loading},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null)))},ne=L(function(){var e=Object(a.useState)(""),t=Object(m.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(null),u=Object(m.a)(o,2),l=u[0],s=u[1],f=Object(a.useState)(!1),g=Object(m.a)(f,2),h=g[0],E=g[1];return Object(a.useEffect)(function(){!function(){var e;i.a.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,E(!0),t.next=4,i.a.awrap(O());case 4:e=t.sent,s(e.data),E(!1),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0),E(!1);case 13:case"end":return t.stop()}},null,null,[[0,9]])}()},[]),r.a.createElement(Y,null,r.a.createElement("div",{className:v.a.Todo},r.a.createElement("h2",{className:v.a.title},"\u65b0\u589e\u9805\u76ee"),r.a.createElement("div",{className:v.a.addBar},r.a.createElement(U,{type:"input",inputType:"text",name:"add-todo",value:n,changed:function(e){c(e.target.value)},config:{placeholder:"\u8acb\u8f38\u5165\u65b0\u589e\u9805\u76ee"}}),r.a.createElement(R,{clicked:function(){var e,t;return i.a.async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,E(!0),e={item:n,isDone:!1},a.next=5,i.a.awrap(j(e));case 5:t=a.sent,s(function(n){return Object(p.a)({},n,Object(d.a)({},t.data.name,Object(p.a)({},e)))}),c(""),E(!1),a.next=15;break;case 11:a.prev=11,a.t0=a.catch(0),console.log(a.t0),E(!1);case 15:case"end":return a.stop()}},null,null,[[0,11]])}},"ADD")),r.a.createElement("h2",{className:v.a.title},"\u5f85\u5b8c\u6210\u9805\u76ee",r.a.createElement("div",{className:v.a.loading},h&&r.a.createElement(te,null))),r.a.createElement(V,{list:l,onFinished:function(e){var t,n;return i.a.async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,E(!0),t=l,n=Object.keys(t).map(function(n){if(n===e)return t[n]}).reduce(function(e,t){return Object(p.a)({},e,{},t,{isDone:!0})},{}),a.next=6,i.a.awrap(y(e,n));case 6:s(function(t){return Object(p.a)({},t,Object(d.a)({},e,Object(p.a)({},n)))}),E(!1),a.next=14;break;case 10:a.prev=10,a.t0=a.catch(0),console.log(a.t0),E(!1);case 14:case"end":return a.stop()}},null,null,[[0,10]])},onDeleted:function(e){var t;return i.a.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,E(!0),n.next=4,i.a.awrap(k(e));case 4:t=Object.keys(l).map(function(t){if(t!==e)return Object(d.a)({},t,Object(p.a)({},l[t]))}).reduce(function(e,t){return Object(p.a)({},e,{},t)},{}),s(Object(p.a)({},t)),E(!1),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(0),console.log(n.t0),E(!1);case 13:case"end":return n.stop()}},null,null,[[0,9]])},done:!1})))},_),ae=n(20),re=n.n(ae),ce=L(function(){var e=Object(a.useState)(null),t=Object(m.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(!1),u=Object(m.a)(o,2),l=u[0],s=u[1];return Object(a.useEffect)(function(){!function(){var e;i.a.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s(!0),t.next=4,i.a.awrap(O());case 4:e=t.sent,c(e.data),s(!1),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0),s(!1);case 13:case"end":return t.stop()}},null,null,[[0,9]])}()},[]),r.a.createElement(Y,null,r.a.createElement("div",{className:re.a.Done},r.a.createElement("h2",{className:re.a.title},"\u5df2\u5b8c\u6210\u9805\u76ee",r.a.createElement("div",{className:re.a.loading},l&&r.a.createElement(te,null))),r.a.createElement(V,{list:n,onCanceled:function(e){var t,a;return i.a.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,s(!0),t=n,a=Object.keys(t).map(function(n){if(n===e)return t[n]}).reduce(function(e,t){return Object(p.a)({},e,{},t,{isDone:!1})},{}),r.next=6,i.a.awrap(y(e,a));case 6:r.sent,c(function(t){return Object(p.a)({},t,Object(d.a)({},e,Object(p.a)({},a)))}),s(!1),r.next=15;break;case 11:r.prev=11,r.t0=r.catch(0),console.log(r.t0),s(!1);case 15:case"end":return r.stop()}},null,null,[[0,11]])},onDeleted:function(e){var t;return i.a.async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,s(!0),a.next=4,i.a.awrap(k(e));case 4:a.sent,t=Object.keys(n).map(function(t){if(t!==e)return Object(d.a)({},t,Object(p.a)({},n[t]))}).reduce(function(e,t){return Object(p.a)({},e,{},t)},{}),c(Object(p.a)({},t)),s(!1),a.next=14;break;case 10:a.prev=10,a.t0=a.catch(0),console.log(a.t0),s(!1);case 14:case"end":return a.stop()}},null,null,[[0,10]])},done:!0})))},_),oe=n(14),ue=n.n(oe),le=function(e,t){switch(t.type){case"SEND":return{loading:!0,error:null};case"RESPONSE":return Object(p.a)({},e,{loading:!1});case"ERROR":return{loading:!1,error:t.errorMessage};case"CLEAR":return{loading:!1,error:null};default:throw new Error("Somthing went wrong!")}},se=n(46),ie=n.n(se),de=function(e){return r.a.createElement("div",{className:ie.a.Card},e.children)},pe=n(21),me=n.n(pe),fe=function(e){var t=[me.a.Backdrop];return e.show?t.push(me.a.show):t.push(me.a.hide),r.a.createElement("div",{className:t.join(" "),onClick:e.clicked})},ve=n(31),ge=n.n(ve),he=function(e){var t=window.document.getElementById("global-modal"),n=r.a.createElement(r.a.Fragment,null,console.log(e.show),r.a.createElement(fe,{show:e.show,clicked:e.clicked}),r.a.createElement("div",{className:ge.a.Modal},r.a.createElement("div",{className:ge.a.close,onClick:e.clicked},r.a.createElement("span",null),r.a.createElement("span",null)),e.children));return Object(c.createPortal)(n,t)},Ee=function(e){return Object.keys(e.data).map(function(t,n){return r.a.createElement(U,{key:t+n,type:e.data[t].type,inputType:e.data[t].inputType,name:t,config:e.data[t].config,changed:function(n){return e.changed(n,t)},value:e.data[t].value,valid:e.data[t].valid,touch:e.data[t].touch})})},_e=L(function(e){var t=Object(a.useReducer)(le,{loading:!1,error:null}),n=Object(m.a)(t,2),c=n[0],o=n[1],u=Object(a.useState)({email:{type:"input",inputType:"email",config:{placeholder:"email address"},value:"",validRules:{required:!0,isEmail:!0},valid:!1,touch:!1},password:{type:"input",inputType:"password",config:{placeholder:"password"},value:"",validRules:{required:!0,minLength:6},valid:!1,touch:!1},comfirnPsw:{type:"input",inputType:"password",config:{placeholder:"comfirn password"},value:"",validRules:{required:!0,minLength:6},valid:!1,touch:!1}}),l=Object(m.a)(u,2),s=l[0],f=l[1],v=Object(a.useCallback)(function(e,t){var n=e.currentTarget.value;f(function(e){var a=D(e[t],{value:n,valid:C(n,e[t].validRules),touch:!0});return D(e,Object(d.a)({},t,a))})},[]),g=Object(a.useCallback)(function(t){var n,a,r,c,u,l;return i.a.async(function(s){for(;;)switch(s.prev=s.next){case 0:if(l=function(e){return e.password.value===e.comfirnPsw.value},u=function(e){var t=!1;return 0===Object.keys(e).filter(function(t){return!1===e[t].valid}).length&&(t=!0),t},c=function(e){return"200"===e.status||200===e.status},r=function(e){return Object.keys(e).map(function(t){return"email"===t||"password"===t?Object(d.a)({},t,e[t].value):{}}).reduce(function(e,t){return Object(p.a)({},e,{},t)},{})},o({type:"SEND"}),u(t)){s.next=8;break}return o({type:"ERROR",errorMessage:"\u586b\u5165\u8cc7\u6599\u4e0d\u6b63\u78ba,\u8acb\u6aa2\u67e5\u5f8c\u518d\u767c\u9001"}),s.abrupt("return");case 8:if(l(t)){s.next=11;break}return o({type:"ERROR",errorMessage:"\u5bc6\u78bc\u4e0d\u4e00\u81f4,\u8acb\u91cd\u65b0\u8f38\u5165\u5f8c\u518d\u767c\u9001"}),s.abrupt("return");case 11:return n=r(t),s.next=14,i.a.awrap(b(n));case 14:(a=s.sent)&&(c(a)?e.history.push("/signin"):(o({type:"ERROR",errorMessage:"\u5beb\u5165\u8cc7\u6599\u5931\u6557"}),console.log(a))),o({type:"RESPONSE"});case 17:case"end":return s.stop()}})},[e.history]),h=Object(a.useCallback)(function(){o({type:"CLEAR"})},[]);return r.a.createElement("div",{className:ue.a.Signup},c.error&&r.a.createElement(he,{show:!0,clicked:h},c.error),r.a.createElement("div",{className:ue.a.wrap},r.a.createElement(de,{className:ue.a.card},r.a.createElement("div",{className:ue.a.title},r.a.createElement("span",null,"\u8a3b\u518a"),r.a.createElement("div",{className:ue.a.loading},c.loading&&r.a.createElement(te,null))),r.a.createElement("div",null,r.a.createElement(Ee,{data:s,changed:v})),r.a.createElement("div",{className:ue.a.btns},r.a.createElement(R,{clicked:function(){return g(s)}},"\u9001\u51fa"),r.a.createElement(R,{clicked:function(){return e.history.push("/signin")}},"\u767b\u5165")))))},h.a),be=n(15),we=n.n(be),Oe=L(function(e){var t=Object(a.useReducer)(le,{loading:!1,error:null}),n=Object(m.a)(t,2),c=n[0],o=n[1],u=Object(a.useState)({email:{type:"input",inputType:"email",config:{placeholder:"email address"},value:"",validRules:{required:!0,isEmail:!0},valid:!1,touch:!1},password:{type:"input",inputType:"password",config:{placeholder:"password"},value:"",validRules:{required:!0,minLength:6},valid:!1,touch:!1}}),l=Object(m.a)(u,2),s=l[0],f=l[1],v=Object(a.useCallback)(function(){o({type:"CLEAR"})},[]);return r.a.createElement("div",{className:we.a.Signin},c.error&&r.a.createElement(he,{show:!0,clicked:v},c.error),r.a.createElement("div",{className:we.a.wrap},r.a.createElement(de,{className:we.a.card},r.a.createElement("div",{className:we.a.title},r.a.createElement("span",null,"\u767b\u5165"),r.a.createElement("div",{className:we.a.loading},c.loading&&r.a.createElement(te,null))),r.a.createElement("div",null,r.a.createElement(Ee,{data:s,changed:function(e,t){var n=e.currentTarget.value;f(function(e){var a=D(e[t],{value:n,valid:C(n,e[t].validRules),touch:!0});return D(e,Object(d.a)({},t,a))})}})),r.a.createElement("div",{className:we.a.btns},r.a.createElement(R,{clicked:function(){return function(t){var n,a,r,c,u,l,s;return i.a.async(function(m){for(;;)switch(m.prev=m.next){case 0:if(s=function(t){localStorage.setItem("idToken",t.idToken),localStorage.setItem("userId",t.userId),e.history.push("/")},l=function(e){var t=!1;return 0===Object.keys(e).filter(function(t){return!1===e[t].valid}).length&&(t=!0),t},u=function(e){return"200"===e.status||200===e.status},c=function(e){return Object.keys(e).map(function(t){return Object(d.a)({},t,e[t].value)}).reduce(function(e,t){return Object(p.a)({},e,{},t)},{})},o({type:"SEND"}),l(t)){m.next=8;break}return o({type:"ERROR",errorMessage:"\u586b\u5165\u8cc7\u6599\u4e0d\u6b63\u78ba,\u8acb\u6aa2\u67e5\u5f8c\u518d\u767c\u9001"}),m.abrupt("return");case 8:return n=c(t),m.next=11,i.a.awrap(w(n));case 11:(a=m.sent)&&(u(a)?(r={idToken:a.data.idToken,userId:a.data.localId},s(r)):o({type:"ERROR",errorMessage:"\u767b\u5165\u5931\u6557"})),o({type:"RESPONSE"});case 14:case"end":return m.stop()}})}(s)}},"\u9001\u51fa"),r.a.createElement(R,{clicked:function(){return e.history.push("/signup")}},"\u8a3b\u518a")))))},h.a),je=function(){return r.a.createElement("div",null,r.a.createElement(l.d,null,r.a.createElement(l.b,{path:"/",exact:!0,component:ne}),r.a.createElement(l.b,{path:"/done",component:ce}),r.a.createElement(l.b,{path:"/signup",component:_e}),r.a.createElement(l.b,{path:"/signin",component:Oe}),r.a.createElement(l.a,{to:"/"})),r.a.createElement("div",{id:"global-modal"}))},ye=r.a.createElement(u.a,null,r.a.createElement(je,null));o.a.render(ye,document.getElementById("root"))}},[[47,1,2]]]);
//# sourceMappingURL=main.130848de.chunk.js.map