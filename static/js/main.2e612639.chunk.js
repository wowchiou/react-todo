(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,t,n){e.exports={Signup:"Signup_Signup__3l2L_",wrap:"Signup_wrap__cnmpo",title:"Signup_title__Z-jWB",loading:"Signup_loading__19f_W",btns:"Signup_btns__3tHBz",popup:"Signup_popup__1i9Bu"}},15:function(e,t,n){e.exports={Signin:"Signin_Signin__29Qsq",wrap:"Signin_wrap__y1xxj",title:"Signin_title__D6oGa",loading:"Signin_loading__V8ytj",btns:"Signin_btns__30Syc",popup:"Signin_popup__36Lt4"}},16:function(e,t,n){e.exports={Todo:"Todo_Todo__3bKlf",addBar:"Todo_addBar__2ed_s",loading:"Todo_loading__HT2HM"}},19:function(e,t,n){e.exports={error:"withErrorHandler_error__1vxNE",show:"withErrorHandler_show__1AZKd",hide:"withErrorHandler_hide__GUCvq"}},20:function(e,t,n){e.exports={Done:"Done_Done__1htW2",addBar:"Done_addBar__37YM6",loading:"Done_loading__3UtG1"}},21:function(e,t,n){e.exports={Backdrop:"Backdrop_Backdrop__26bb-",hide:"Backdrop_hide__1csbP",show:"Backdrop_show__OOqWn"}},25:function(e,t,n){e.exports={header:"Layout_header__26DsU",logout:"Layout_logout__3YGC3"}},26:function(e,t,n){e.exports={NavItem:"NavItem_NavItem__3anDl"}},27:function(e,t,n){e.exports={Input:"Input_Input__2gEm4",error:"Input_error__33xaI"}},28:function(e,t,n){e.exports={TodoList:"TodoList_TodoList__rr0er",nothing:"TodoList_nothing__2Nh1X"}},29:function(e,t,n){e.exports={TodoItem:"TodoItem_TodoItem__wKZA2",btns:"TodoItem_btns__3y70N"}},30:function(e,t,n){e.exports={loading:"Loading_loading__3hxUF","lds-ring":"Loading_lds-ring__1VIXi"}},31:function(e,t,n){e.exports={Modal:"Modal_Modal__2Nxic",fadeInDown:"Modal_fadeInDown__PIteE",close:"Modal_close__2LYPW"}},42:function(e,t,n){e.exports={Button:"Button_Button__3Ur4h"}},45:function(e,t,n){e.exports={Navigation:"Navigation_Navigation__UxCuy"}},46:function(e,t,n){e.exports={Card:"Card_Card__3yI8w"}},47:function(e,t,n){e.exports=n(76)},52:function(e,t,n){},76:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(18),o=n.n(c),l=n(12),u=(n(52),n(11)),i=n(1),s=n.n(i),d=n(5),p=n(2),m=n(4),f=n(16),v=n.n(f),g=n(10),h=n.n(g),E="AIzaSyAzWGnKUYY8e6g9oASL90g7tj4TjoVCRGg",_=h.a.create({baseURL:"https://react-my-test-fb5ea.firebaseio.com/"}),b=function(e){var t;return s.a.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,s.a.awrap(h.a.post("https://identitytoolkit.googleapis.com/v1/accounts:signUp?key="+E,e));case 2:return t=n.sent,n.abrupt("return",t);case 4:case"end":return n.stop()}})},j=function(e){var t;return s.a.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,s.a.awrap(h.a.post("https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key="+E,e));case 2:return t=n.sent,n.abrupt("return",t);case 4:case"end":return n.stop()}})},O=function(){var e;return s.a.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.a.awrap(_.get("/todo/".concat(localStorage.getItem("userId"),".json")));case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}})},w=function(e){var t;return s.a.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,s.a.awrap(_.post("/todo/".concat(localStorage.getItem("userId"),".json"),e));case 2:return t=n.sent,n.abrupt("return",t);case 4:case"end":return n.stop()}})},y=function(e,t){var n;return s.a.async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,s.a.awrap(_.put("/todo/".concat(localStorage.getItem("userId"),"/").concat(e,".json"),t));case 2:return n=a.sent,a.abrupt("return",n);case 4:case"end":return a.stop()}})},x=function(e){var t;return s.a.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,s.a.awrap(_.delete("/todo/".concat(localStorage.getItem("userId"),"/").concat(e,".json")));case 2:return t=n.sent,n.abrupt("return",t);case 4:case"end":return n.stop()}})},k=n(19),N=n.n(k),I=n(42),S=n.n(I),T=r.a.memo(function(e){return r.a.createElement("button",{className:S.a.Button,disabled:e.disabled,onClick:e.clicked},e.children)}),R=r.a.memo(T),D=function(e,t){return Object(p.a)({},e,{},t)},C=function(e,t){var n=!0;if(!t)return!0;if(t.required&&!(n=""!==e.trim()&&n))return!1;if(t.minLength&&!(n=e.length>=t.minLength&&n))return!1;if(t.isEmail){if(!(n=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/.test(e)&&n))return!1}return!0},L=function(e,t){return Object(u.g)(function(n){var c=function(e){var t=Object(a.useState)(null),n=Object(m.a)(t,2),r=n[0],c=n[1],o=e.interceptors.request.use(function(e){return c(null),e}),l=e.interceptors.response.use(function(e){return e},function(e){c(e)});return Object(a.useEffect)(function(){return function(){e.interceptors.request.eject(o),e.interceptors.response.eject(l)}},[e.interceptors.request,e.interceptors.response,o,l]),[r,Object(a.useCallback)(function(){c(null)},[])]}(t),o=Object(m.a)(c,2),l=o[0],u=o[1],i=[N.a.error];l?i.push(N.a.show):i.push(N.a.hide);var s="",d=!1;return l&&l.response?404===l.response.status?(s="\u7cfb\u7d71\u767c\u751f\u554f\u984c,\u8acb\u7a0d\u5019\u518d\u8a66",d=!0):s=l.response.data.error.message:s=l&&!l.response?"\u8acb\u78ba\u8a8d\u7db2\u8def\u9023\u7dda":"\u7cfb\u7d71\u767c\u751f\u554f\u984c,\u8acb\u7a0d\u5019\u518d\u8a66",r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:i.join(" ")},r.a.createElement("p",null,s),r.a.createElement(R,{clicked:d?function(){!function(e){localStorage.removeItem("idToken"),localStorage.removeItem("userId"),e.history.push("/signin")}(n)}:u},"\u78ba\u8a8d")),r.a.createElement(e,n))})},B=n(25),M=n.n(B),q=n(26),z=n.n(q),P=function(e){return r.a.createElement("li",{className:z.a.NavItem},r.a.createElement(l.b,{to:e.link,exact:e.exact,activeClassName:z.a.active},e.children))},A=n(45),U=n.n(A),F=function(){return r.a.createElement("ul",{className:U.a.Navigation},r.a.createElement(P,{link:"/",exact:!0},"TODO"),r.a.createElement(P,{link:"/done"},"Done"))},W=Object(u.g)(function(e){return localStorage.getItem("idToken")||e.history.push("/signin"),r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:M.a.header},r.a.createElement(F,null),r.a.createElement("div",{className:M.a.logout},r.a.createElement(R,{clicked:function(){localStorage.removeItem("idToken"),localStorage.removeItem("userId"),e.history.push("/signin")}},"\u767b\u51fa"))),r.a.createElement("main",null,e.children))}),G=n(27),H=n.n(G),Y=function(e){var t=[H.a.Input];!e.valid&&e.touch&&t.push(H.a.error);var n=r.a.createElement("p",null,"Input Error");switch(e.type){case"input":return r.a.createElement("input",Object.assign({className:t.join(" "),type:e.inputType,name:e.name},e.config,{value:e.value,onChange:e.changed}));case"select":case"textarea":return;default:return n}},K=n(28),V=n.n(K),Z=n(29),J=n.n(Z),X=function(e){var t;return t=e.done?r.a.createElement(R,{clicked:function(){e.onCanceled(e.itemId)}},"\u53d6\u6d88"):r.a.createElement(R,{clicked:function(){e.onFinished(e.itemId)}},"\u5b8c\u6210"),r.a.createElement("li",{className:J.a.TodoItem},r.a.createElement("p",null,e.item),r.a.createElement("div",{className:J.a.btns},t,r.a.createElement(R,{clicked:function(){e.onDeleted(e.itemId)}},"\u522a\u9664")))},$=function(e){var t=r.a.createElement("li",{className:V.a.nothing},"\u76ee\u524d\u7121\u4ee3\u8fa6\u4e8b\u9805"),n=t;e.list&&0===(n=Object.keys(e.list).map(function(t){var n=!1;return e.list[t].isDone===e.done&&(n=r.a.createElement(X,{itemId:t,key:t,item:e.list[t].item,onFinished:e.onFinished,onDeleted:e.onDeleted,onCanceled:e.onCanceled,done:e.done})),n})).filter(function(e){return e}).length&&(n=t);return r.a.createElement("ul",{className:V.a.TodoList},n)},Q=n(30),ee=n.n(Q),te=function(){return r.a.createElement("div",{className:ee.a.Loading},r.a.createElement("div",{className:ee.a.loading},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null)))},ne=L(function(){var e=Object(a.useState)(""),t=Object(m.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(null),l=Object(m.a)(o,2),u=l[0],i=l[1],f=Object(a.useState)(!1),g=Object(m.a)(f,2),h=g[0],E=g[1];return Object(a.useEffect)(function(){!function(){var e;s.a.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,E(!0),t.next=4,s.a.awrap(O());case 4:e=t.sent,i(e.data),E(!1),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0),E(!1);case 13:case"end":return t.stop()}},null,null,[[0,9]])}()},[]),r.a.createElement(W,null,r.a.createElement("div",{className:v.a.Todo},r.a.createElement("h2",{className:v.a.title},"\u65b0\u589e\u9805\u76ee"),r.a.createElement("div",{className:v.a.addBar},r.a.createElement(Y,{type:"input",inputType:"text",name:"add-todo",value:n,changed:function(e){c(e.target.value)},config:{placeholder:"\u8acb\u8f38\u5165\u65b0\u589e\u9805\u76ee"}}),r.a.createElement(R,{clicked:function(){var e,t;return s.a.async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,E(!0),e={item:n,isDone:!1},a.next=5,s.a.awrap(w(e));case 5:t=a.sent,i(function(n){return Object(p.a)({},n,Object(d.a)({},t.data.name,Object(p.a)({},e)))}),c(""),E(!1),a.next=15;break;case 11:a.prev=11,a.t0=a.catch(0),console.log(a.t0),E(!1);case 15:case"end":return a.stop()}},null,null,[[0,11]])}},"ADD")),r.a.createElement("h2",{className:v.a.title},"\u5f85\u5b8c\u6210\u9805\u76ee",r.a.createElement("div",{className:v.a.loading},h&&r.a.createElement(te,null))),r.a.createElement($,{list:u,onFinished:function(e){var t,n;return s.a.async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,E(!0),t=u,n=Object.keys(t).map(function(n){if(n===e)return t[n]}).reduce(function(e,t){return Object(p.a)({},e,{},t,{isDone:!0})},{}),a.next=6,s.a.awrap(y(e,n));case 6:i(function(t){return Object(p.a)({},t,Object(d.a)({},e,Object(p.a)({},n)))}),E(!1),a.next=14;break;case 10:a.prev=10,a.t0=a.catch(0),console.log(a.t0),E(!1);case 14:case"end":return a.stop()}},null,null,[[0,10]])},onDeleted:function(e){var t;return s.a.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,E(!0),n.next=4,s.a.awrap(x(e));case 4:t=Object.keys(u).map(function(t){if(t!==e)return Object(d.a)({},t,Object(p.a)({},u[t]))}).reduce(function(e,t){return Object(p.a)({},e,{},t)},{}),i(Object(p.a)({},t)),E(!1),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(0),console.log(n.t0),E(!1);case 13:case"end":return n.stop()}},null,null,[[0,9]])},done:!1})))},_),ae=n(20),re=n.n(ae),ce=L(function(){var e=Object(a.useState)(null),t=Object(m.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(!1),l=Object(m.a)(o,2),u=l[0],i=l[1];return Object(a.useEffect)(function(){!function(){var e;s.a.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,i(!0),t.next=4,s.a.awrap(O());case 4:e=t.sent,c(e.data),i(!1),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0),i(!1);case 13:case"end":return t.stop()}},null,null,[[0,9]])}()},[]),r.a.createElement(W,null,r.a.createElement("div",{className:re.a.Done},r.a.createElement("h2",{className:re.a.title},"\u5df2\u5b8c\u6210\u9805\u76ee",r.a.createElement("div",{className:re.a.loading},u&&r.a.createElement(te,null))),r.a.createElement($,{list:n,onCanceled:function(e){var t,a;return s.a.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,i(!0),t=n,a=Object.keys(t).map(function(n){if(n===e)return t[n]}).reduce(function(e,t){return Object(p.a)({},e,{},t,{isDone:!1})},{}),r.next=6,s.a.awrap(y(e,a));case 6:c(function(t){return Object(p.a)({},t,Object(d.a)({},e,Object(p.a)({},a)))}),i(!1),r.next=14;break;case 10:r.prev=10,r.t0=r.catch(0),console.log(r.t0),i(!1);case 14:case"end":return r.stop()}},null,null,[[0,10]])},onDeleted:function(e){var t;return s.a.async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,i(!0),a.next=4,s.a.awrap(x(e));case 4:t=Object.keys(n).map(function(t){if(t!==e)return Object(d.a)({},t,Object(p.a)({},n[t]))}).reduce(function(e,t){return Object(p.a)({},e,{},t)},{}),c(Object(p.a)({},t)),i(!1),a.next=13;break;case 9:a.prev=9,a.t0=a.catch(0),console.log(a.t0),i(!1);case 13:case"end":return a.stop()}},null,null,[[0,9]])},done:!0})))},_),oe=n(14),le=n.n(oe),ue=function(e,t){switch(t.type){case"SEND":return{loading:!0,error:null};case"RESPONSE":return Object(p.a)({},e,{loading:!1});case"ERROR":return{loading:!1,error:t.errorMessage};case"CLEAR":return{loading:!1,error:null};default:throw new Error("Somthing went wrong!")}},ie=n(46),se=n.n(ie),de=function(e){return r.a.createElement("div",{className:se.a.Card},e.children)},pe=n(21),me=n.n(pe),fe=function(e){var t=[me.a.Backdrop];return e.show?t.push(me.a.show):t.push(me.a.hide),r.a.createElement("div",{className:t.join(" "),onClick:e.clicked})},ve=n(31),ge=n.n(ve),he=function(e){var t=window.document.getElementById("global-modal"),n=r.a.createElement(r.a.Fragment,null,console.log(e.show),r.a.createElement(fe,{show:e.show,clicked:e.clicked}),r.a.createElement("div",{className:ge.a.Modal},r.a.createElement("div",{className:ge.a.close,onClick:e.clicked},r.a.createElement("span",null),r.a.createElement("span",null)),e.children));return Object(c.createPortal)(n,t)},Ee=function(e){return Object.keys(e.data).map(function(t,n){return r.a.createElement(Y,{key:t+n,type:e.data[t].type,inputType:e.data[t].inputType,name:t,config:e.data[t].config,changed:function(n){return e.changed(n,t)},value:e.data[t].value,valid:e.data[t].valid,touch:e.data[t].touch})})},_e=L(function(e){var t=Object(a.useReducer)(ue,{loading:!1,error:null}),n=Object(m.a)(t,2),c=n[0],o=n[1],l=Object(a.useState)({email:{type:"input",inputType:"email",config:{placeholder:"email address"},value:"",validRules:{required:!0,isEmail:!0},valid:!1,touch:!1},password:{type:"input",inputType:"password",config:{placeholder:"password"},value:"",validRules:{required:!0,minLength:6},valid:!1,touch:!1},comfirnPsw:{type:"input",inputType:"password",config:{placeholder:"comfirn password"},value:"",validRules:{required:!0,minLength:6},valid:!1,touch:!1}}),u=Object(m.a)(l,2),i=u[0],f=u[1],v=Object(a.useCallback)(function(e,t){var n=e.currentTarget.value;f(function(e){var a=D(e[t],{value:n,valid:C(n,e[t].validRules),touch:!0});return D(e,Object(d.a)({},t,a))})},[]),g=Object(a.useCallback)(function(t){var n,a,r,c,l,u;return s.a.async(function(i){for(;;)switch(i.prev=i.next){case 0:if(u=function(e){return e.password.value===e.comfirnPsw.value},l=function(e){var t=!1;return 0===Object.keys(e).filter(function(t){return!1===e[t].valid}).length&&(t=!0),t},c=function(e){return"200"===e.status||200===e.status},r=function(e){return Object.keys(e).map(function(t){return"email"===t||"password"===t?Object(d.a)({},t,e[t].value):{}}).reduce(function(e,t){return Object(p.a)({},e,{},t)},{})},o({type:"SEND"}),l(t)){i.next=8;break}return o({type:"ERROR",errorMessage:"\u586b\u5165\u8cc7\u6599\u4e0d\u6b63\u78ba,\u8acb\u6aa2\u67e5\u5f8c\u518d\u767c\u9001"}),i.abrupt("return");case 8:if(u(t)){i.next=11;break}return o({type:"ERROR",errorMessage:"\u5bc6\u78bc\u4e0d\u4e00\u81f4,\u8acb\u91cd\u65b0\u8f38\u5165\u5f8c\u518d\u767c\u9001"}),i.abrupt("return");case 11:return n=r(t),i.next=14,s.a.awrap(b(n));case 14:(a=i.sent)&&(c(a)?e.history.push("/signin"):(o({type:"ERROR",errorMessage:"\u5beb\u5165\u8cc7\u6599\u5931\u6557"}),console.log(a))),o({type:"RESPONSE"});case 17:case"end":return i.stop()}})},[e.history]),h=Object(a.useCallback)(function(){o({type:"CLEAR"})},[]);return r.a.createElement("div",{className:le.a.Signup},c.error&&r.a.createElement(he,{show:!0,clicked:h},c.error),r.a.createElement("div",{className:le.a.wrap},r.a.createElement(de,{className:le.a.card},r.a.createElement("div",{className:le.a.title},r.a.createElement("span",null,"\u8a3b\u518a"),r.a.createElement("div",{className:le.a.loading},c.loading&&r.a.createElement(te,null))),r.a.createElement("div",null,r.a.createElement(Ee,{data:i,changed:v})),r.a.createElement("div",{className:le.a.btns},r.a.createElement(R,{clicked:function(){return g(i)}},"\u9001\u51fa"),r.a.createElement(R,{clicked:function(){return e.history.push("/signin")}},"\u767b\u5165")))))},h.a),be=n(15),je=n.n(be),Oe=L(function(e){var t=Object(a.useReducer)(ue,{loading:!1,error:null}),n=Object(m.a)(t,2),c=n[0],o=n[1],l=Object(a.useState)({email:{type:"input",inputType:"email",config:{placeholder:"email address"},value:"",validRules:{required:!0,isEmail:!0},valid:!1,touch:!1},password:{type:"input",inputType:"password",config:{placeholder:"password"},value:"",validRules:{required:!0,minLength:6},valid:!1,touch:!1}}),u=Object(m.a)(l,2),i=u[0],f=u[1],v=Object(a.useCallback)(function(){o({type:"CLEAR"})},[]);return r.a.createElement("div",{className:je.a.Signin},c.error&&r.a.createElement(he,{show:!0,clicked:v},c.error),r.a.createElement("div",{className:je.a.wrap},r.a.createElement(de,{className:je.a.card},r.a.createElement("div",{className:je.a.title},r.a.createElement("span",null,"\u767b\u5165"),r.a.createElement("div",{className:je.a.loading},c.loading&&r.a.createElement(te,null))),r.a.createElement("div",null,r.a.createElement(Ee,{data:i,changed:function(e,t){var n=e.currentTarget.value;f(function(e){var a=D(e[t],{value:n,valid:C(n,e[t].validRules),touch:!0});return D(e,Object(d.a)({},t,a))})}})),r.a.createElement("div",{className:je.a.btns},r.a.createElement(R,{clicked:function(){return function(t){var n,a,r,c,l,u,i;return s.a.async(function(m){for(;;)switch(m.prev=m.next){case 0:if(i=function(t){localStorage.setItem("idToken",t.idToken),localStorage.setItem("userId",t.userId),e.history.push("/")},u=function(e){var t=!1;return 0===Object.keys(e).filter(function(t){return!1===e[t].valid}).length&&(t=!0),t},l=function(e){return"200"===e.status||200===e.status},c=function(e){return Object.keys(e).map(function(t){return Object(d.a)({},t,e[t].value)}).reduce(function(e,t){return Object(p.a)({},e,{},t)},{})},o({type:"SEND"}),u(t)){m.next=8;break}return o({type:"ERROR",errorMessage:"\u586b\u5165\u8cc7\u6599\u4e0d\u6b63\u78ba,\u8acb\u6aa2\u67e5\u5f8c\u518d\u767c\u9001"}),m.abrupt("return");case 8:return n=c(t),m.next=11,s.a.awrap(j(n));case 11:(a=m.sent)&&(l(a)?(r={idToken:a.data.idToken,userId:a.data.localId},i(r)):o({type:"ERROR",errorMessage:"\u767b\u5165\u5931\u6557"})),o({type:"RESPONSE"});case 14:case"end":return m.stop()}})}(i)}},"\u9001\u51fa"),r.a.createElement(R,{clicked:function(){return e.history.push("/signup")}},"\u8a3b\u518a")))))},h.a),we=function(){return r.a.createElement("div",null,r.a.createElement(u.d,null,r.a.createElement(u.b,{path:"/",exact:!0,component:ne}),r.a.createElement(u.b,{path:"/done",component:ce}),r.a.createElement(u.b,{path:"/signup",component:_e}),r.a.createElement(u.b,{path:"/signin",component:Oe}),r.a.createElement(u.a,{to:"/"})),r.a.createElement("div",{id:"global-modal"}))},ye=r.a.createElement(l.a,null,r.a.createElement(we,null));o.a.render(ye,document.getElementById("root"))}},[[47,1,2]]]);
//# sourceMappingURL=main.2e612639.chunk.js.map