{"version":3,"sources":["containers/Signup/Signup.module.scss","containers/Signin/Signin.module.scss","containers/Todo/Todo.module.scss","hoc/withErrorHandler/withErrorHandler.module.scss","containers/Done/Done.module.scss","UI/Backdrop/Backdrop.module.scss","components/Layout/Layout.module.scss","components/Navigation/NavItem/NavItem.module.scss","UI/Input/Input.module.scss","components/TodoList/TodoList.module.scss","components/TodoList/TodoItem/TodoItem.module.scss","UI/Loading/Loading.module.scss","UI/Modal/Modal.module.scss","UI/Button/Button.module.scss","components/Navigation/Navigation.module.scss","UI/Card/Card.module.scss","shared/service.js","UI/Button/Button.js","shared/utility.js","hoc/withErrorHandler/withErrorHandler.js","hooks/http-error-handler.js","components/Navigation/NavItem/NavItem.js","components/Navigation/Navigation.js","components/Layout/Layout.js","UI/Input/Input.js","components/TodoList/TodoItem/TodoItem.js","components/TodoList/TodoList.js","UI/Loading/Loading.js","containers/Todo/Todo.js","containers/Done/Done.js","store/actions/auth-action.js","store/actions/actionTypes.js","UI/Card/Card.js","UI/Backdrop/Backdrop.js","UI/Modal/Modal.js","components/SignForm/SignForm.js","containers/Signup/Signup.js","containers/Signin/Signin.js","App.js","store/reducers/auth-reducer.js","index.js"],"names":["module","exports","Signup","wrap","title","loading","btns","popup","Signin","Todo","addBar","error","show","hide","Done","Backdrop","header","logout","NavItem","Input","TodoList","nothing","TodoItem","lds-ring","Modal","fadeInDown","close","Button","Navigation","Card","apiKey","ajaxBaseUrl","axios","create","baseURL","ajaxSignUp","data","response","regenerator_default","a","async","_context","prev","next","awrap","post","sent","abrupt","stop","ajaxSignIn","_context2","ajaxGetTodoList","_context3","get","concat","localStorage","getItem","ajaxAddTodoItem","_context4","ajaxUpdateTodoItemDone","id","_context5","put","ajaxDeleteTodoItem","_context6","delete","React","memo","props","react_default","createElement","className","styles","disabled","onClick","clicked","children","updateOBJ","currentState","updatedState","Object","objectSpread2","checkValidity","value","rules","isValid","required","trim","minLength","length","isEmail","test","withErrorHandler","WrappedComponents","withRouter","_useHttpErrorHandler","httpInstance","_useState","useState","_useState2","slicedToArray","setError","reqInterceptor","interceptors","request","use","req","resInterceptor","res","err","useEffect","eject","useCallback","useHttpErrorHandler","_useHttpErrorHandler2","clearError","classes","push","errorMessage","isLogOut","status","message","Fragment","join","Button_Button","removeItem","history","logOut","react_router_dom","to","link","exact","activeClassName","active","Navigation_NavItem_NavItem","components_Navigation_Navigation","valid","touch","inputElement","type","assign","inputType","name","config","onChange","changed","isDoneButton","done","onCanceled","itemId","onFinished","item","onDeleted","defaultTag","listTag","list","keys","map","itm","todoItem","isDone","TodoList_TodoItem_TodoItem","key","filter","Loading","addTodoItem","setAddTodoItem","_useState3","_useState4","todoList","setTodoList","_useState5","_useState6","setLoading","t0","console","log","fetchTodoList","components_Layout_Layout","UI_Input_Input","e","target","placeholder","prevState","defineProperty","UI_Loading_Loading","components_TodoList_TodoList","_todoList","updateValue","reduce","obj","el","updateList","authSuccess","tokenId","userId","authFail","setAuthRedirectAuth","path","getFormValue","formList","signOk","checkIsFormOk","result","passwordHasSameValue","password","comfirnPsw","globalModal","window","document","getElementById","modal","UI_Backdrop_Backdrop","createPortal","SignForm","idx","connect","state","auth","authRedirectPath","dispatch","onSignUp","formData","signupResponse","clearAuthError","email","validRules","signupFormData","setSignupFormData","react_router","UI_Modal_Modal","UI_Card_Card","card","components_SignForm_SignForm","ev","val","currentTarget","updatedData","isLogIn","authRedirectPAth","onLogin","idToken","localId","setItem","signInFormData","setSignInFormData","App","component","initState","composeEnhancers","compose","rootReducer","combineReducers","arguments","undefined","action","store","createStore","applyMiddleware","thunk","app","es","src_App","ReactDOM","render"],"mappings":"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","file":"static/js/main.160f4bbc.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Signup\":\"Signup_Signup__2qtJk\",\"wrap\":\"Signup_wrap__8v4B7\",\"title\":\"Signup_title__2nu_r\",\"loading\":\"Signup_loading__ObD4t\",\"btns\":\"Signup_btns__3-FKC\",\"popup\":\"Signup_popup__Wxjwo\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Signin\":\"Signin_Signin__2e031\",\"wrap\":\"Signin_wrap__x5NML\",\"title\":\"Signin_title__2WF6f\",\"loading\":\"Signin_loading__7_AKq\",\"btns\":\"Signin_btns__1tjCT\",\"popup\":\"Signin_popup__2dUO4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Todo\":\"Todo_Todo__-Q6Ol\",\"addBar\":\"Todo_addBar__3RSjp\",\"loading\":\"Todo_loading__1MyYK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"error\":\"withErrorHandler_error__3kl37\",\"show\":\"withErrorHandler_show__3a0L4\",\"hide\":\"withErrorHandler_hide__1Ddjw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Done\":\"Done_Done__QevfN\",\"addBar\":\"Done_addBar__3p5z0\",\"loading\":\"Done_loading__1gvvS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Backdrop\":\"Backdrop_Backdrop__36ATE\",\"hide\":\"Backdrop_hide__2O0of\",\"show\":\"Backdrop_show__1ccD5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Layout_header__20f77\",\"logout\":\"Layout_logout__1GsBe\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"NavItem\":\"NavItem_NavItem__3DdHv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Input\":\"Input_Input__-lHNF\",\"error\":\"Input_error__2MrBe\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"TodoList\":\"TodoList_TodoList__2Ovt2\",\"nothing\":\"TodoList_nothing__QUY40\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"TodoItem\":\"TodoItem_TodoItem__3HHw_\",\"btns\":\"TodoItem_btns__3WzMK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loading\":\"Loading_loading__SWxUm\",\"lds-ring\":\"Loading_lds-ring__2c7QY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Modal\":\"Modal_Modal__3xBhX\",\"fadeInDown\":\"Modal_fadeInDown__18j2P\",\"close\":\"Modal_close__2np8F\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__qseUx\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Navigation\":\"Navigation_Navigation__3IToe\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Card\":\"Card_Card__3zacT\"};","import axios from 'axios';\r\n\r\nconst apiKey = 'AIzaSyAzWGnKUYY8e6g9oASL90g7tj4TjoVCRGg';\r\n\r\nexport const ajaxBaseUrl = axios.create({\r\n  baseURL: 'https://react-my-test-fb5ea.firebaseio.com/'\r\n});\r\n\r\nexport const ajaxSignUp = async data => {\r\n  const response = await axios.post(\r\n    'https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=' + apiKey,\r\n    data\r\n  );\r\n  return response;\r\n};\r\n\r\nexport const ajaxSignIn = async data => {\r\n  const response = await axios.post(\r\n    'https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=' +\r\n      apiKey,\r\n    data\r\n  );\r\n  return response;\r\n};\r\n\r\nexport const ajaxGetTodoList = async () => {\r\n  const response = await ajaxBaseUrl.get(\r\n    `/todo/${localStorage.getItem('userId')}.json`\r\n  );\r\n  return response;\r\n};\r\n\r\nexport const ajaxAddTodoItem = async data => {\r\n  const response = await ajaxBaseUrl.post(\r\n    `/todo/${localStorage.getItem('userId')}.json`,\r\n    data\r\n  );\r\n  return response;\r\n};\r\n\r\nexport const ajaxUpdateTodoItemDone = async (id, data) => {\r\n  const response = await ajaxBaseUrl.put(\r\n    `/todo/${localStorage.getItem('userId')}/${id}.json`,\r\n    data\r\n  );\r\n  return response;\r\n};\r\n\r\nexport const ajaxDeleteTodoItem = async id => {\r\n  const response = await ajaxBaseUrl.delete(\r\n    `/todo/${localStorage.getItem('userId')}/${id}.json`\r\n  );\r\n  return response;\r\n};\r\n","import React from 'react';\r\nimport styles from './Button.module.scss';\r\n\r\nconst Button = React.memo(props => {\r\n  return (\r\n    <button\r\n      className={styles.Button}\r\n      disabled={props.disabled}\r\n      onClick={props.clicked}\r\n    >\r\n      {props.children}\r\n    </button>\r\n  );\r\n});\r\n\r\nexport default React.memo(Button);\r\n","export const updateOBJ = (currentState, updatedState) => {\r\n  return {\r\n    ...currentState,\r\n    ...updatedState\r\n  };\r\n};\r\n\r\nexport const checkValidity = (value, rules) => {\r\n  let isValid = true;\r\n\r\n  if (!rules) return true;\r\n\r\n  if (rules.required) {\r\n    isValid = value.trim() !== '' && isValid;\r\n    if (!isValid) return false;\r\n  }\r\n\r\n  if (rules.minLength) {\r\n    isValid = value.length >= rules.minLength && isValid;\r\n    if (!isValid) return false;\r\n  }\r\n\r\n  if (rules.isEmail) {\r\n    const emailReg = /[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/;\r\n    isValid = emailReg.test(value) && isValid;\r\n    if (!isValid) return false;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nexport const logOut = props => {\r\n  localStorage.removeItem('idToken');\r\n  localStorage.removeItem('userId');\r\n  props.history.push('/signin');\r\n};\r\n","import React from 'react';\r\nimport styles from './withErrorHandler.module.scss';\r\nimport { withRouter } from 'react-router-dom';\r\nimport useHttpErrorHandler from '../../hooks/http-error-handler';\r\nimport Button from '../../UI/Button/Button';\r\nimport { logOut } from '../../shared/utility';\r\n\r\nconst withErrorHandler = (WrappedComponents, axios) => {\r\n  return withRouter(props => {\r\n    const [error, clearError] = useHttpErrorHandler(axios);\r\n\r\n    let classes = [styles.error];\r\n    error ? classes.push(styles.show) : classes.push(styles.hide);\r\n\r\n    let errorMessage = '';\r\n    let isLogOut = false;\r\n\r\n    if (error && error.response) {\r\n      if (error.response.status === 404) {\r\n        errorMessage = '系統發生問題,請稍候再試';\r\n        isLogOut = true;\r\n      } else {\r\n        errorMessage = error.response.data.error.message;\r\n      }\r\n    } else if (error && !error.response) {\r\n      errorMessage = '請確認網路連線';\r\n    } else {\r\n      errorMessage = '系統發生問題,請稍候再試';\r\n    }\r\n\r\n    const logOutHandler = () => {\r\n      logOut(props);\r\n    };\r\n\r\n    return (\r\n      <>\r\n        <div className={classes.join(' ')}>\r\n          <p>{errorMessage}</p>\r\n          <Button clicked={isLogOut ? logOutHandler : clearError}>確認</Button>\r\n        </div>\r\n        <WrappedComponents {...props} />\r\n      </>\r\n    );\r\n  });\r\n};\r\n\r\nexport default withErrorHandler;\r\n","import { useState, useEffect, useCallback } from 'react';\r\n\r\nexport default httpInstance => {\r\n  const [error, setError] = useState(null);\r\n\r\n  const reqInterceptor = httpInstance.interceptors.request.use(req => {\r\n    setError(null);\r\n    return req;\r\n  });\r\n\r\n  const resInterceptor = httpInstance.interceptors.response.use(\r\n    res => res,\r\n    err => {\r\n      setError(err);\r\n    }\r\n  );\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      httpInstance.interceptors.request.eject(reqInterceptor);\r\n      httpInstance.interceptors.response.eject(resInterceptor);\r\n    };\r\n  }, [\r\n    httpInstance.interceptors.request,\r\n    httpInstance.interceptors.response,\r\n    reqInterceptor,\r\n    resInterceptor\r\n  ]);\r\n\r\n  const errorConfirmedHandler = useCallback(() => {\r\n    setError(null);\r\n  }, []);\r\n\r\n  return [error, errorConfirmedHandler];\r\n};\r\n","import React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\nimport styles from './NavItem.module.scss';\r\n\r\nconst NavItem = props => {\r\n  return (\r\n    <li className={styles.NavItem}>\r\n      <NavLink\r\n        to={props.link}\r\n        exact={props.exact}\r\n        activeClassName={styles.active}\r\n      >\r\n        {props.children}\r\n      </NavLink>\r\n    </li>\r\n  );\r\n};\r\n\r\nexport default NavItem;\r\n","import React from 'react';\r\nimport NavItem from './NavItem/NavItem';\r\n\r\nimport styles from './Navigation.module.scss';\r\n\r\nconst Navigation = () => {\r\n  return (\r\n    <ul className={styles.Navigation}>\r\n      <NavItem link=\"/\" exact>\r\n        TODO\r\n      </NavItem>\r\n      <NavItem link=\"/done\">Done</NavItem>\r\n    </ul>\r\n  );\r\n};\r\n\r\nexport default Navigation;\r\n","import React from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport styles from './Layout.module.scss';\r\n\r\nimport Navigation from '../Navigation/Navigation';\r\nimport Button from '../../UI/Button/Button';\r\n\r\nconst Layout = props => {\r\n  const logOutHandler = () => {\r\n    localStorage.removeItem('idToken');\r\n    localStorage.removeItem('userId');\r\n    props.history.push('/signin');\r\n  };\r\n\r\n  if (!localStorage.getItem('idToken')) {\r\n    props.history.push('/signin');\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <header className={styles.header}>\r\n        <Navigation />\r\n        <div className={styles.logout}>\r\n          <Button clicked={logOutHandler}>登出</Button>\r\n        </div>\r\n      </header>\r\n      <main>{props.children}</main>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default withRouter(Layout);\r\n","import React from 'react';\r\nimport styles from './Input.module.scss';\r\n\r\nconst Input = props => {\r\n  const classes = [styles.Input];\r\n  !props.valid && props.touch && classes.push(styles.error);\r\n\r\n  let inputElement = <p>Input Error</p>;\r\n\r\n  switch (props.type) {\r\n    case 'input':\r\n      return (inputElement = (\r\n        <input\r\n          className={classes.join(' ')}\r\n          type={props.inputType}\r\n          name={props.name}\r\n          {...props.config}\r\n          value={props.value}\r\n          onChange={props.changed}\r\n        />\r\n      ));\r\n    case 'select':\r\n      return;\r\n    case 'textarea':\r\n      return;\r\n    default:\r\n      return inputElement;\r\n  }\r\n};\r\n\r\nexport default Input;\r\n","import React from 'react';\r\nimport styles from './TodoItem.module.scss';\r\n\r\nimport Button from '../../../UI/Button/Button';\r\n\r\nconst TodoItem = props => {\r\n  let isDoneButton;\r\n  if (props.done) {\r\n    isDoneButton = (\r\n      <Button\r\n        clicked={() => {\r\n          props.onCanceled(props.itemId);\r\n        }}\r\n      >\r\n        取消\r\n      </Button>\r\n    );\r\n  } else {\r\n    isDoneButton = (\r\n      <Button\r\n        clicked={() => {\r\n          props.onFinished(props.itemId);\r\n        }}\r\n      >\r\n        完成\r\n      </Button>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <li className={styles.TodoItem}>\r\n      <p>{props.item}</p>\r\n      <div className={styles.btns}>\r\n        {isDoneButton}\r\n        <Button\r\n          clicked={() => {\r\n            props.onDeleted(props.itemId);\r\n          }}\r\n        >\r\n          刪除\r\n        </Button>\r\n      </div>\r\n    </li>\r\n  );\r\n};\r\n\r\nexport default TodoItem;\r\n","import React from 'react';\r\nimport styles from './TodoList.module.scss';\r\n\r\nimport TodoItem from './TodoItem/TodoItem';\r\n\r\nconst TodoList = props => {\r\n  const defaultTag = <li className={styles.nothing}>目前無代辦事項</li>;\r\n  let listTag = defaultTag;\r\n\r\n  if (props.list) {\r\n    listTag = Object.keys(props.list).map(itm => {\r\n      let todoItem = false;\r\n      if (props.list[itm].isDone === props.done) {\r\n        todoItem = (\r\n          <TodoItem\r\n            itemId={itm}\r\n            key={itm}\r\n            item={props.list[itm].item}\r\n            onFinished={props.onFinished}\r\n            onDeleted={props.onDeleted}\r\n            onCanceled={props.onCanceled}\r\n            done={props.done}\r\n          />\r\n        );\r\n      }\r\n      return todoItem;\r\n    });\r\n\r\n    // 如果list無資料顯示預設文字\r\n    const listTagLength = listTag.filter(itm => itm).length;\r\n    if (listTagLength === 0) {\r\n      listTag = defaultTag;\r\n    }\r\n  }\r\n\r\n  return <ul className={styles.TodoList}>{listTag}</ul>;\r\n};\r\n\r\nexport default TodoList;\r\n","import React from 'react';\r\nimport styles from './Loading.module.scss';\r\n\r\nconst Loading = () => {\r\n  return (\r\n    <div className={styles.Loading}>\r\n      <div className={styles.loading}>\r\n        <div></div>\r\n        <div></div>\r\n        <div></div>\r\n        <div></div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Loading;\r\n","import React, { useState, useEffect } from 'react';\r\nimport styles from './Todo.module.scss';\r\nimport {\r\n  ajaxBaseUrl as axios,\r\n  ajaxGetTodoList,\r\n  ajaxAddTodoItem,\r\n  ajaxUpdateTodoItemDone,\r\n  ajaxDeleteTodoItem\r\n} from '../../shared/service';\r\n\r\nimport withErrorHandler from '../../hoc/withErrorHandler/withErrorHandler';\r\nimport Layout from '../../components/Layout/Layout';\r\nimport Input from '../../UI/Input/Input';\r\nimport Button from '../../UI/Button/Button';\r\nimport TodoList from '../../components/TodoList/TodoList';\r\nimport Loading from '../../UI/Loading/Loading';\r\n\r\nconst Todo = () => {\r\n  const [addTodoItem, setAddTodoItem] = useState('');\r\n  const [todoList, setTodoList] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const changeAddItemHandler = e => {\r\n    setAddTodoItem(e.target.value);\r\n  };\r\n\r\n  const addTodoItemHandler = async () => {\r\n    if (addTodoItem.trim() === '') return;\r\n\r\n    try {\r\n      setLoading(true);\r\n      const todoItem = {\r\n        item: addTodoItem,\r\n        isDone: false\r\n      };\r\n      const res = await ajaxAddTodoItem(todoItem);\r\n      setTodoList(prevState => {\r\n        return {\r\n          ...prevState,\r\n          [res.data.name]: {\r\n            ...todoItem\r\n          }\r\n        };\r\n      });\r\n      setAddTodoItem('');\r\n      setLoading(false);\r\n    } catch (error) {\r\n      console.log(error);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const onFinished = async id => {\r\n    try {\r\n      setLoading(true);\r\n      const _todoList = todoList;\r\n      const updateValue = Object.keys(_todoList)\r\n        .map(itm => {\r\n          if (itm === id) return _todoList[itm];\r\n        })\r\n        .reduce((obj, el) => {\r\n          return {\r\n            ...obj,\r\n            ...el,\r\n            isDone: true\r\n          };\r\n        }, {});\r\n      await ajaxUpdateTodoItemDone(id, updateValue);\r\n      setTodoList(prevState => {\r\n        return {\r\n          ...prevState,\r\n          [id]: {\r\n            ...updateValue\r\n          }\r\n        };\r\n      });\r\n      setLoading(false);\r\n    } catch (error) {\r\n      console.log(error);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const onDeleted = async id => {\r\n    try {\r\n      setLoading(true);\r\n      await ajaxDeleteTodoItem(id);\r\n      const updateList = Object.keys(todoList)\r\n        .map(itm => {\r\n          if (itm !== id) return { [itm]: { ...todoList[itm] } };\r\n        })\r\n        .reduce((obj, el) => {\r\n          return {\r\n            ...obj,\r\n            ...el\r\n          };\r\n        }, {});\r\n      setTodoList({ ...updateList });\r\n      setLoading(false);\r\n    } catch (error) {\r\n      console.log(error);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchTodoList = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const res = await ajaxGetTodoList();\r\n      setTodoList(res.data);\r\n      setLoading(false);\r\n    } catch (error) {\r\n      console.log(error);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchTodoList();\r\n  }, []);\r\n\r\n  return (\r\n    <Layout>\r\n      <div className={styles.Todo}>\r\n        <h2 className={styles.title}>新增項目</h2>\r\n        <div className={styles.addBar}>\r\n          <Input\r\n            type=\"input\"\r\n            inputType=\"text\"\r\n            name=\"add-todo\"\r\n            value={addTodoItem}\r\n            changed={changeAddItemHandler}\r\n            config={{ placeholder: '請輸入新增項目' }}\r\n          />\r\n          <Button clicked={addTodoItemHandler}>ADD</Button>\r\n        </div>\r\n\r\n        <h2 className={styles.title}>\r\n          待完成項目\r\n          <div className={styles.loading}>{loading && <Loading />}</div>\r\n        </h2>\r\n        <TodoList\r\n          list={todoList}\r\n          onFinished={onFinished}\r\n          onDeleted={onDeleted}\r\n          done={false}\r\n        />\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default withErrorHandler(Todo, axios);\r\n","import React, { useState, useEffect } from 'react';\r\nimport styles from './Done.module.scss';\r\nimport {\r\n  ajaxBaseUrl as axios,\r\n  ajaxGetTodoList,\r\n  ajaxUpdateTodoItemDone,\r\n  ajaxDeleteTodoItem\r\n} from '../../shared/service';\r\n\r\nimport withErrorHandler from '../../hoc/withErrorHandler/withErrorHandler';\r\nimport Layout from '../../components/Layout/Layout';\r\nimport TodoList from '../../components/TodoList/TodoList';\r\nimport Loading from '../../UI/Loading/Loading';\r\n\r\nconst Done = () => {\r\n  const [todoList, setTodoList] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const onCanceled = async id => {\r\n    try {\r\n      setLoading(true);\r\n      const _todoList = todoList;\r\n      const updateValue = Object.keys(_todoList)\r\n        .map(itm => {\r\n          if (itm === id) return _todoList[itm];\r\n        })\r\n        .reduce((obj, el) => {\r\n          return {\r\n            ...obj,\r\n            ...el,\r\n            isDone: false\r\n          };\r\n        }, {});\r\n\r\n      await ajaxUpdateTodoItemDone(id, updateValue);\r\n      setTodoList(prevState => {\r\n        return {\r\n          ...prevState,\r\n          [id]: {\r\n            ...updateValue\r\n          }\r\n        };\r\n      });\r\n      setLoading(false);\r\n    } catch (error) {\r\n      console.log(error);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const onDeleted = async id => {\r\n    try {\r\n      setLoading(true);\r\n      await ajaxDeleteTodoItem(id);\r\n      const updateList = Object.keys(todoList)\r\n        .map(itm => {\r\n          if (itm !== id) return { [itm]: { ...todoList[itm] } };\r\n        })\r\n        .reduce((obj, el) => {\r\n          return {\r\n            ...obj,\r\n            ...el\r\n          };\r\n        }, {});\r\n      setTodoList({ ...updateList });\r\n      setLoading(false);\r\n    } catch (error) {\r\n      console.log(error);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchTodoList = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const res = await ajaxGetTodoList();\r\n      setTodoList(res.data);\r\n      setLoading(false);\r\n    } catch (error) {\r\n      console.log(error);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchTodoList();\r\n  }, []);\r\n\r\n  return (\r\n    <Layout>\r\n      <div className={styles.Done}>\r\n        <h2 className={styles.title}>\r\n          已完成項目\r\n          <div className={styles.loading}>{loading && <Loading />}</div>\r\n        </h2>\r\n        <TodoList\r\n          list={todoList}\r\n          onCanceled={onCanceled}\r\n          onDeleted={onDeleted}\r\n          done={true}\r\n        />\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default withErrorHandler(Done, axios);\r\n","import { ajaxSignIn, ajaxSignUp } from '../../shared/service';\r\nimport * as actionTypes from './actionTypes';\r\n\r\nexport const authStart = () => {\r\n  return {\r\n    type: actionTypes.AUTH_START\r\n  };\r\n};\r\n\r\nexport const authSuccess = (tokenId, userId) => {\r\n  return {\r\n    type: actionTypes.AUTH_SUCCESS,\r\n    tokenId: tokenId,\r\n    userId: userId\r\n  };\r\n};\r\n\r\nexport const authFail = errorMessage => {\r\n  return {\r\n    type: actionTypes.AUTH_FAIL,\r\n    errorMessage: errorMessage\r\n  };\r\n};\r\n\r\nexport const authLogout = () => {\r\n  return {\r\n    type: actionTypes.AUTH_LOGOUT\r\n  };\r\n};\r\n\r\nexport const clearAuthError = () => {\r\n  return {\r\n    type: actionTypes.AUTH_CLEAR_ERROR\r\n  };\r\n};\r\n\r\nexport const setAuthRedirectAuth = path => {\r\n  return {\r\n    type: actionTypes.AUTH_REDIRECT_PATH,\r\n    path: path\r\n  };\r\n};\r\n\r\nexport const onLogin = formData => {\r\n  return async dispatch => {\r\n    dispatch(authStart());\r\n    if (!checkIsFormOk(formData)) {\r\n      return dispatch(authFail('填入資料不正確,請檢查後再發送'));\r\n    }\r\n    try {\r\n      const data = getFormValue(formData);\r\n      const response = await ajaxSignIn(data);\r\n      if (response) {\r\n        if (signOk(response)) {\r\n          const tokenId = response.data.idToken;\r\n          const userId = response.data.localId;\r\n\r\n          localStorage.setItem('idToken', tokenId);\r\n          localStorage.setItem('userId', userId);\r\n          dispatch(setAuthRedirectAuth('/'));\r\n          dispatch(authSuccess(tokenId, userId));\r\n        }\r\n      }\r\n    } catch (error) {\r\n      dispatch(authFail('登入失敗'));\r\n    }\r\n  };\r\n};\r\n\r\nexport const onSignUp = formData => {\r\n  return async dispatch => {\r\n    dispatch(authStart());\r\n    if (!checkIsFormOk(formData)) {\r\n      return dispatch(authFail('填入資料不正確,請檢查後再發送'));\r\n    }\r\n    if (!passwordHasSameValue(formData)) {\r\n      return dispatch(authFail('密碼不一致,請重新輸入後再發送'));\r\n    }\r\n    try {\r\n      const data = getFormValue(formData);\r\n      const signupResponse = await ajaxSignUp(data);\r\n      if (signupResponse) {\r\n        if (signOk(signupResponse)) {\r\n          dispatch(setAuthRedirectAuth('/signin'));\r\n        }\r\n      }\r\n    } catch (error) {\r\n      return dispatch(authFail('寫入資料失敗'));\r\n    }\r\n  };\r\n};\r\n\r\nexport const onLogOut = () => {\r\n  return dispatch => {\r\n    localStorage.removeItem('idToken');\r\n    localStorage.removeItem('userId');\r\n    dispatch(authLogout());\r\n  };\r\n};\r\n\r\nfunction getFormValue(formList) {\r\n  const result = Object.keys(formList)\r\n    .map(itm => {\r\n      if (itm === 'email' || itm === 'password') {\r\n        return { [itm]: formList[itm].value };\r\n      } else {\r\n        return {};\r\n      }\r\n    })\r\n    .reduce((obj, el) => {\r\n      return { ...obj, ...el };\r\n    }, {});\r\n  return result;\r\n}\r\n\r\nfunction signOk(res) {\r\n  return res.status === '200' || res.status === 200;\r\n}\r\n\r\nfunction checkIsFormOk(data) {\r\n  let result = false;\r\n  const validData = Object.keys(data).filter(itm => data[itm].valid === false);\r\n  if (validData.length === 0) {\r\n    result = true;\r\n  }\r\n  return result;\r\n}\r\n\r\nfunction passwordHasSameValue(data) {\r\n  return data.password.value === data.comfirnPsw.value;\r\n}\r\n","export const AUTH_START = 'AUTH_START';\r\nexport const AUTH_SUCCESS = 'AUTH_SUCCESS';\r\nexport const AUTH_FAIL = 'AUTH_FAIL';\r\nexport const AUTH_LOGOUT = 'AUTH_LOGOUT';\r\nexport const AUTH_CLEAR_ERROR = 'AUTH_CLEAR_ERROR';\r\nexport const AUTH_REDIRECT_PATH = 'AUTH_REDIRECT_PATH';\r\n","import React from 'react';\r\nimport styles from './Card.module.scss';\r\n\r\nconst Card = props => <div className={styles.Card}>{props.children}</div>;\r\n\r\nexport default Card;\r\n","import React from 'react';\r\n\r\nimport styles from './Backdrop.module.scss';\r\n\r\nconst Backdrop = props => {\r\n  const classes = [styles.Backdrop];\r\n  props.show ? classes.push(styles.show) : classes.push(styles.hide);\r\n\r\n  return <div className={classes.join(' ')} onClick={props.clicked}></div>;\r\n};\r\n\r\nexport default Backdrop;\r\n","import React from 'react';\r\nimport { createPortal } from 'react-dom';\r\nimport Backdrop from '../Backdrop/Backdrop';\r\n\r\nimport styles from './Modal.module.scss';\r\n\r\nconst Modal = props => {\r\n  const globalModal = window.document.getElementById('global-modal');\r\n\r\n  const modal = (\r\n    <>\r\n      {console.log(props.show)}\r\n      <Backdrop show={props.show} clicked={props.clicked} />\r\n      <div className={styles.Modal}>\r\n        <div className={styles.close} onClick={props.clicked}>\r\n          <span></span>\r\n          <span></span>\r\n        </div>\r\n        {props.children}\r\n      </div>\r\n    </>\r\n  );\r\n\r\n  return createPortal(modal, globalModal);\r\n};\r\n\r\nexport default Modal;\r\n","import React from 'react';\r\nimport Input from '../../UI/Input/Input';\r\n\r\nconst SignForm = props => {\r\n  return Object.keys(props.data).map((itm, idx) => {\r\n    return (\r\n      <Input\r\n        key={itm + idx}\r\n        type={props.data[itm].type}\r\n        inputType={props.data[itm].inputType}\r\n        name={itm}\r\n        config={props.data[itm].config}\r\n        changed={e => props.changed(e, itm)}\r\n        value={props.data[itm].value}\r\n        valid={props.data[itm].valid}\r\n        touch={props.data[itm].touch}\r\n      />\r\n    );\r\n  });\r\n};\r\n\r\nexport default SignForm;\r\n","import React, { useState } from 'react';\r\nimport styles from './Signup.module.scss';\r\nimport axios from 'axios';\r\nimport { updateOBJ, checkValidity } from '../../shared/utility';\r\nimport { connect } from 'react-redux';\r\nimport { Redirect } from 'react-router-dom';\r\nimport * as actions from '../../store/actions/index';\r\n\r\nimport withErrorHandler from '../../hoc/withErrorHandler/withErrorHandler';\r\nimport Button from '../../UI/Button/Button';\r\nimport Card from '../../UI/Card/Card';\r\nimport Modal from '../../UI/Modal/Modal';\r\nimport Loading from '../../UI/Loading/Loading';\r\nimport SignForm from '../../components/SignForm/SignForm';\r\n\r\nconst Signup = props => {\r\n  const { loading, error, clearAuthError, onSignUp, authRedirectPath } = props;\r\n\r\n  const [signupFormData, setSignupFormData] = useState({\r\n    email: {\r\n      type: 'input',\r\n      inputType: 'email',\r\n      config: {\r\n        placeholder: 'email address'\r\n      },\r\n      value: '',\r\n      validRules: {\r\n        required: true,\r\n        isEmail: true\r\n      },\r\n      valid: false,\r\n      touch: false\r\n    },\r\n    password: {\r\n      type: 'input',\r\n      inputType: 'password',\r\n      config: {\r\n        placeholder: 'password'\r\n      },\r\n      value: '',\r\n      validRules: {\r\n        required: true,\r\n        minLength: 6\r\n      },\r\n      valid: false,\r\n      touch: false\r\n    },\r\n    comfirnPsw: {\r\n      type: 'input',\r\n      inputType: 'password',\r\n      config: {\r\n        placeholder: 'comfirn password'\r\n      },\r\n      value: '',\r\n      validRules: {\r\n        required: true,\r\n        minLength: 6\r\n      },\r\n      valid: false,\r\n      touch: false\r\n    }\r\n  });\r\n\r\n  const changeHandler = (ev, type) => {\r\n    const val = ev.currentTarget.value;\r\n    setSignupFormData(prevState => {\r\n      const updatedData = updateOBJ(prevState[type], {\r\n        value: val,\r\n        valid: checkValidity(val, prevState[type].validRules),\r\n        touch: true\r\n      });\r\n      return updateOBJ(prevState, { [type]: updatedData });\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className={styles.Signup}>\r\n      {authRedirectPath !== '/' && <Redirect to={authRedirectPath} />}\r\n\r\n      {error && (\r\n        <Modal show clicked={clearAuthError}>\r\n          {error}\r\n        </Modal>\r\n      )}\r\n\r\n      <div className={styles.wrap}>\r\n        <Card className={styles.card}>\r\n          <div className={styles.title}>\r\n            <span>註冊</span>\r\n            <div className={styles.loading}>{loading && <Loading />}</div>\r\n          </div>\r\n          <div>\r\n            <SignForm data={signupFormData} changed={changeHandler} />\r\n          </div>\r\n          <div className={styles.btns}>\r\n            <Button clicked={() => onSignUp(signupFormData)}>送出</Button>\r\n            <Button clicked={() => props.history.push('/signin')}>登入</Button>\r\n          </div>\r\n        </Card>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    loading: state.auth.loading,\r\n    error: state.auth.error,\r\n    authRedirectPath: state.auth.authRedirectPath\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    onSignUp: data => dispatch(actions.onSignUp(data)),\r\n    clearAuthError: () => dispatch(actions.clearAuthError())\r\n  };\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(withErrorHandler(Signup, axios));\r\n","import React, { useState } from 'react';\r\nimport styles from './Signin.module.scss';\r\nimport axios from 'axios';\r\nimport { updateOBJ, checkValidity } from '../../shared/utility';\r\nimport { connect } from 'react-redux';\r\nimport * as actions from '../../store/actions/index';\r\nimport { Redirect } from 'react-router-dom';\r\n\r\nimport withErrorHandler from '../../hoc/withErrorHandler/withErrorHandler';\r\nimport Button from '../../UI/Button/Button';\r\nimport Card from '../../UI/Card/Card';\r\nimport Modal from '../../UI/Modal/Modal';\r\nimport Loading from '../../UI/Loading/Loading';\r\nimport SignForm from '../../components/SignForm/SignForm';\r\n\r\nconst Signin = props => {\r\n  const {\r\n    isLogIn,\r\n    loading,\r\n    error,\r\n    onLogin,\r\n    clearAuthError,\r\n    authRedirectPath\r\n  } = props;\r\n\r\n  const [signInFormData, setSignInFormData] = useState({\r\n    email: {\r\n      type: 'input',\r\n      inputType: 'email',\r\n      config: {\r\n        placeholder: 'email address'\r\n      },\r\n      value: '',\r\n      validRules: {\r\n        required: true,\r\n        isEmail: true\r\n      },\r\n      valid: false,\r\n      touch: false\r\n    },\r\n    password: {\r\n      type: 'input',\r\n      inputType: 'password',\r\n      config: {\r\n        placeholder: 'password'\r\n      },\r\n      value: '',\r\n      validRules: {\r\n        required: true,\r\n        minLength: 6\r\n      },\r\n      valid: false,\r\n      touch: false\r\n    }\r\n  });\r\n\r\n  const changeHandler = (e, type) => {\r\n    const val = e.currentTarget.value;\r\n    setSignInFormData(prevState => {\r\n      const updatedData = updateOBJ(prevState[type], {\r\n        value: val,\r\n        valid: checkValidity(val, prevState[type].validRules),\r\n        touch: true\r\n      });\r\n      return updateOBJ(prevState, { [type]: updatedData });\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className={styles.Signin}>\r\n      {isLogIn && <Redirect to={authRedirectPath} />}\r\n\r\n      {error && (\r\n        <Modal show clicked={clearAuthError}>\r\n          {error}\r\n        </Modal>\r\n      )}\r\n\r\n      <div className={styles.wrap}>\r\n        <Card className={styles.card}>\r\n          <div className={styles.title}>\r\n            <span>登入</span>\r\n            <div className={styles.loading}>{loading && <Loading />}</div>\r\n          </div>\r\n          <div>\r\n            <SignForm data={signInFormData} changed={changeHandler} />\r\n          </div>\r\n          <div className={styles.btns}>\r\n            <Button clicked={() => onLogin(signInFormData)}>送出</Button>\r\n            <Button clicked={() => props.history.push('/signup')}>註冊</Button>\r\n          </div>\r\n        </Card>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    isLogIn: state.auth.tokenId !== null,\r\n    loading: state.auth.loading,\r\n    error: state.auth.error,\r\n    authRedirectPath: state.auth.authRedirectPAth\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    onLogin: data => dispatch(actions.onLogin(data)),\r\n    clearAuthError: () => dispatch(actions.clearAuthError())\r\n  };\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(withErrorHandler(Signin, axios));\r\n","import React from 'react';\r\nimport { Switch, Route, Redirect } from 'react-router-dom';\r\n\r\nimport Todo from './containers/Todo/Todo';\r\nimport Done from './containers/Done/Done';\r\nimport Signup from './containers/Signup/Signup';\r\nimport Signin from './containers/Signin/Signin';\r\n\r\nconst App = () => {\r\n  return (\r\n    <div>\r\n      <Switch>\r\n        <Route path=\"/\" exact component={Todo} />\r\n        <Route path=\"/done\" component={Done} />\r\n        <Route path=\"/signup\" component={Signup} />\r\n        <Route path=\"/signin\" component={Signin} />\r\n        <Redirect to=\"/\" />\r\n      </Switch>\r\n\r\n      <div id=\"global-modal\"></div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import * as actionTypes from '../actions/actionTypes';\r\n\r\nconst initState = {\r\n  tokenId: null,\r\n  userId: null,\r\n  error: null,\r\n  loading: false,\r\n  authRedirectPath: '/'\r\n};\r\n\r\nexport default function(state = initState, action) {\r\n  switch (action.type) {\r\n    case actionTypes.AUTH_START:\r\n      return {\r\n        ...state,\r\n        error: null,\r\n        loading: true\r\n      };\r\n    case actionTypes.AUTH_SUCCESS:\r\n      return {\r\n        ...state,\r\n        tokenId: action.tokenId,\r\n        userId: action.userId,\r\n        error: null,\r\n        loading: false\r\n      };\r\n    case actionTypes.AUTH_FAIL:\r\n      return {\r\n        ...state,\r\n        error: action.errorMessage,\r\n        loading: false\r\n      };\r\n    case actionTypes.AUTH_LOGOUT:\r\n      return {\r\n        ...state,\r\n        tokenId: null,\r\n        userId: null\r\n      };\r\n    case actionTypes.AUTH_CLEAR_ERROR:\r\n      return {\r\n        ...state,\r\n        error: null,\r\n        loading: false\r\n      };\r\n    case actionTypes.AUTH_REDIRECT_PATH:\r\n      return {\r\n        ...state,\r\n        loading: false,\r\n        error: null,\r\n        authRedirectPath: action.path\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import React from 'react';\r\nimport './index.scss';\r\nimport App from './App';\r\n\r\nimport ReactDOM from 'react-dom';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport { createStore, applyMiddleware, compose, combineReducers } from 'redux';\r\nimport { Provider } from 'react-redux';\r\nimport authReducer from './store/reducers/auth-reducer';\r\nimport thunk from 'redux-thunk';\r\n\r\n// 使用redux devTool設定\r\nconst composeEnhancers =\r\n  process.env.NODE_ENV === 'development'\r\n    ? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__\r\n    : null || compose;\r\n\r\nconst rootReducer = combineReducers({\r\n  auth: authReducer\r\n});\r\n\r\nconst store = createStore(\r\n  rootReducer,\r\n  composeEnhancers(applyMiddleware(thunk))\r\n);\r\n\r\nconst app = (\r\n  <Provider store={store}>\r\n    <BrowserRouter>\r\n      <App />\r\n    </BrowserRouter>\r\n  </Provider>\r\n);\r\n\r\nReactDOM.render(app, document.getElementById('root'));\r\n"],"sourceRoot":""}