{"version":3,"sources":["containers/Signup/Signup.module.scss","containers/Signin/Signin.module.scss","hoc/withErrorHandler/withErrorHandler.module.scss","UI/Backdrop/Backdrop.module.scss","containers/Home/Home.module.scss","components/Navigation/NavItem/NavItem.module.scss","UI/Modal/Modal.module.scss","UI/Loading/Loading.module.scss","UI/Input/Input.module.scss","components/Navigation/Navigation.module.scss","UI/Button/Button.module.scss","UI/Card/Card.module.scss","components/Navigation/NavItem/NavItem.js","components/Navigation/Navigation.js","containers/Todo/Todo.js","containers/Done/Done.js","UI/Button/Button.js","containers/Home/Home.js","axios-instence.js","shared/utility.js","shared/reducer.js","hoc/withErrorHandler/withErrorHandler.js","hooks/http-error-handler.js","UI/Card/Card.js","UI/Backdrop/Backdrop.js","UI/Modal/Modal.js","UI/Loading/Loading.js","UI/Input/Input.js","components/SignForm/SignForm.js","containers/Signup/Signup.js","containers/Signin/Signin.js","App.js","index.js"],"names":["module","exports","Signup","wrap","title","loading","btns","popup","Signin","error","show","hide","Backdrop","header","logout","NavItem","Modal","fadeInDown","close","lds-ring","Input","Navigation","Button","Card","props","_useRouteMatch","useRouteMatch","path","url","console","log","react_default","a","createElement","className","styles","react_router_dom","to","link","exact","activeClassName","active","children","Navigation_NavItem_NavItem","Todo","Done","React","memo","disabled","onClick","clicked","Home","signoutHandler","localStorage","removeItem","history","push","components_Navigation_Navigation","Button_Button","react_router","component","apiKey","signupInstance","axios","create","baseURL","data","response","regenerator_default","async","_context","prev","next","awrap","post","sent","abrupt","stop","signinInstance","_context2","updateOBJ","currentState","updatedState","Object","objectSpread2","checkValidity","value","rules","isValid","required","trim","minLength","length","isEmail","test","httpReducer","action","type","errorMessage","Error","withErrorHandler","WrappedComponents","_useHttpErrorHandler","httpInstance","_useState","useState","_useState2","slicedToArray","setError","reqInterceptor","interceptors","request","use","req","resInterceptor","res","err","useEffect","eject","useCallback","useHttpErrorHandler","_useHttpErrorHandler2","clearError","classes","Fragment","join","message","globalModal","window","document","getElementById","modal","UI_Backdrop_Backdrop","createPortal","Loading","valid","touch","inputElement","assign","inputType","name","config","onChange","changed","SignForm","keys","map","itm","idx","UI_Input_Input","key","e","_useReducer","useReducer","_useReducer2","httpStatus","dispatchHttpStatus","email","placeholder","validRules","password","comfirnPsw","signupFormData","setSignupFormData","changeHandler","ev","val","currentTarget","prevState","updatedData","defineProperty","signupHandler","formData","signupResponse","getFormValue","signupOk","checkIsFormOk","passwordHasSameValue","result","filter","status","formList","reduce","obj","el","clearModal","UI_Modal_Modal","UI_Card_Card","card","UI_Loading_Loading","components_SignForm_SignForm","signinFormData","setSigninFormData","signinResponse","signinOk","login","token","setItem","idToken","signinHandler","App","getItem","id","app","src_App","ReactDOM","render"],"mappings":"4EACAA,EAAAC,QAAA,CAAkBC,OAAA,uBAAAC,KAAA,qBAAAC,MAAA,sBAAAC,QAAA,wBAAAC,KAAA,qBAAAC,MAAA,2CCAlBP,EAAAC,QAAA,CAAkBO,OAAA,uBAAAL,KAAA,qBAAAC,MAAA,sBAAAC,QAAA,wBAAAC,KAAA,qBAAAC,MAAA,2CCAlBP,EAAAC,QAAA,CAAkBQ,MAAA,gCAAAC,KAAA,+BAAAC,KAAA,oDCAlBX,EAAAC,QAAA,CAAkBW,SAAA,2BAAAD,KAAA,uBAAAD,KAAA,4CCAlBV,EAAAC,QAAA,CAAkBY,OAAA,qBAAAC,OAAA,0CCAlBd,EAAAC,QAAA,CAAkBc,QAAA,8CCAlBf,EAAAC,QAAA,CAAkBe,MAAA,qBAAAC,WAAA,0BAAAC,MAAA,0CCAlBlB,EAAAC,QAAA,CAAkBI,QAAA,yBAAAc,WAAA,+CCAlBnB,EAAAC,QAAA,CAAkBmB,MAAA,qBAAAX,MAAA,0CCAlBT,EAAAC,QAAA,CAAkBoB,WAAA,oDCAlBrB,EAAAC,QAAA,CAAkBqB,OAAA,4CCAlBtB,EAAAC,QAAA,CAAkBsB,KAAA,oNCuBHR,EAnBC,SAAAS,GAAS,IAAAC,EACHC,cAAdC,EADiBF,EACjBE,KAAMC,EADWH,EACXG,IAKZ,OAHAC,QAAQC,IAAIH,GACZE,QAAQC,IAAIF,GAGVG,EAAAC,EAAAC,cAAA,MAAIC,UAAWC,IAAOpB,SACpBgB,EAAAC,EAAAC,cAACG,EAAA,EAAD,CACEC,GAAIT,EAAMJ,EAAMc,KAChBC,MAAOf,EAAMe,MACbC,gBAAiBL,IAAOM,QAEvBjB,EAAMkB,6BCFArB,EAXI,WACjB,OACEU,EAAAC,EAAAC,cAAA,MAAIC,UAAWC,IAAOd,YACpBU,EAAAC,EAAAC,cAACU,EAAD,CAASL,KAAK,IAAIC,OAAK,GAAvB,SAGAR,EAAAC,EAAAC,cAACU,EAAD,CAASL,KAAK,SAAd,UCJSM,EALF,SAAApB,GAEX,OADAK,QAAQC,IAAI,QACLC,EAAAC,EAAAC,cAAA,oBCGMY,EALF,WAEX,OADAhB,QAAQC,IAAI,QACLC,EAAAC,EAAAC,cAAA,qCCDHX,EAASwB,IAAMC,KAAK,SAAAvB,GAGxB,OAFAK,QAAQC,IAAI,UAGVC,EAAAC,EAAAC,cAAA,UACEC,UAAWC,IAAOb,OAClB0B,SAAUxB,EAAMwB,SAChBC,QAASzB,EAAM0B,SAEd1B,EAAMkB,YAKEI,MAAMC,KAAKzB,GCkBX6B,EA1BF,SAAA3B,GAAS,IAAAC,EACAC,cAEd0B,GAHc3B,EACdE,KADcF,EACRG,IAEW,WACrByB,aAAaC,WAAW,WACxB9B,EAAM+B,QAAQC,KAAK,aAGrB,OACEzB,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,UAAQC,UAAWC,IAAOtB,QACxBkB,EAAAC,EAAAC,cAACwB,EAAD,CAAY3C,OAAQsC,IACpBrB,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,IAAOrB,QACrBiB,EAAAC,EAAAC,cAACyB,EAAD,CAAQR,QAASE,GAAjB,kBAGJrB,EAAAC,EAAAC,cAAA,YACEF,EAAAC,EAAAC,cAAC0B,EAAA,EAAD,KACE5B,EAAAC,EAAAC,cAAC0B,EAAA,EAAD,CAAOhC,KAAK,IAAIY,OAAK,EAACqB,UAAWhB,IACjCb,EAAAC,EAAAC,cAAC0B,EAAA,EAAD,CAAOhC,KAAK,QAAQiC,UAAWf,+EC1BnCgB,EAAS,0CAMFC,GAJeC,IAAMC,OAAO,CACvCC,QAAS,gDAGmB,SAAMC,GAAN,IAAAC,EAAA,OAAAC,EAAApC,EAAAqC,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EAAAJ,EAAApC,EAAAyC,MACLV,IAAMW,KAC3B,iEAAmEb,EACnEK,IAH0B,cACtBC,EADsBG,EAAAK,KAAAL,EAAAM,OAAA,SAKrBT,GALqB,wBAAAG,EAAAO,YAQjBC,EAAiB,SAAMZ,GAAN,IAAAC,EAAA,OAAAC,EAAApC,EAAAqC,MAAA,SAAAU,GAAA,cAAAA,EAAAR,KAAAQ,EAAAP,MAAA,cAAAO,EAAAP,KAAA,EAAAJ,EAAApC,EAAAyC,MACLV,IAAMW,KAC3B,6EACEb,EACFK,IAJ0B,cACtBC,EADsBY,EAAAJ,KAAAI,EAAAH,OAAA,SAMrBT,GANqB,wBAAAY,EAAAF,WChBjBG,EAAY,SAACC,EAAcC,GACtC,OAAOC,OAAAC,EAAA,EAAAD,CAAA,GACFF,EADL,GAEKC,IAIMG,EAAgB,SAACC,EAAOC,GACnC,IAAIC,GAAU,EAEd,IAAKD,EAAO,OAAO,EAEnB,GAAIA,EAAME,YACRD,EAA2B,KAAjBF,EAAMI,QAAiBF,GACnB,OAAO,EAGvB,GAAID,EAAMI,aACRH,EAAUF,EAAMM,QAAUL,EAAMI,WAAaH,GAC/B,OAAO,EAGvB,GAAID,EAAMM,QAAS,CAGjB,KADAL,EADiB,wIACEM,KAAKR,IAAUE,GACpB,OAAO,EAGvB,OAAO,GC5BIO,EAAc,SAACd,EAAce,GACxC,OAAQA,EAAOC,MACb,IAAK,OACH,MAAO,CAAE5F,SAAS,EAAMI,MAAO,MACjC,IAAK,WACH,OAAO0E,OAAAC,EAAA,EAAAD,CAAA,GAAKF,EAAZ,CAA0B5E,SAAS,IACrC,IAAK,QACH,MAAO,CAAEA,SAAS,EAAOI,MAAOuF,EAAOE,cACzC,IAAK,QACH,MAAO,CAAE7F,SAAS,EAAOI,MAAO,MAClC,QACE,MAAM,IAAI0F,MAAM,2CCcPC,EAnBU,SAACC,EAAmBtC,GAC3C,OAAO,SAAAvC,GAAS,IAAA8E,ECLH,SAAAC,GAAgB,IAAAC,EACHC,mBAAS,MADNC,EAAAvB,OAAAwB,EAAA,EAAAxB,CAAAqB,EAAA,GACtB/F,EADsBiG,EAAA,GACfE,EADeF,EAAA,GAGvBG,EAAiBN,EAAaO,aAAaC,QAAQC,IAAI,SAAAC,GAE3D,OADAL,EAAS,MACFK,IAGHC,EAAiBX,EAAaO,aAAa3C,SAAS6C,IACxD,SAAAG,GAAG,OAAIA,GACP,SAAAC,GACER,EAASQ,KAoBb,OAhBAC,oBAAU,WACR,OAAO,WACLd,EAAaO,aAAaC,QAAQO,MAAMT,GACxCN,EAAaO,aAAa3C,SAASmD,MAAMJ,KAE1C,CACDX,EAAaO,aAAaC,QAC1BR,EAAaO,aAAa3C,SAC1B0C,EACAK,IAOK,CAACzG,EAJsB8G,sBAAY,WACxCX,EAAS,OACR,KDvB2BY,CAAoBzD,GADlC0D,EAAAtC,OAAAwB,EAAA,EAAAxB,CAAAmB,EAAA,GACP7F,EADOgH,EAAA,GACAC,EADAD,EAAA,GAGVE,EAAU,CAACxF,IAAO1B,OAGtB,OAFAA,EAAQkH,EAAQnE,KAAKrB,IAAOzB,MAAQiH,EAAQnE,KAAKrB,IAAOxB,MAGtDoB,EAAAC,EAAAC,cAAAF,EAAAC,EAAA4F,SAAA,KACE7F,EAAAC,EAAAC,cAAA,OAAKC,UAAWyF,EAAQE,KAAK,MAC3B9F,EAAAC,EAAAC,cAAA,SAAIxB,GAASA,EAAM0D,SAASD,KAAKzD,MAAMqH,SACvC/F,EAAAC,EAAAC,cAACyB,EAAD,CAAQR,QAASwE,GAAjB,iBAEF3F,EAAAC,EAAAC,cAACoE,EAAsB7E,uBEdhBD,EAFF,SAAAC,GAAK,OAAIO,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,IAAOZ,MAAOC,EAAMkB,4BCQ3C9B,EAPE,SAAAY,GACf,IAAMmG,EAAU,CAACxF,IAAOvB,UAGxB,OAFAY,EAAMd,KAAOiH,EAAQnE,KAAKrB,IAAOzB,MAAQiH,EAAQnE,KAAKrB,IAAOxB,MAEtDoB,EAAAC,EAAAC,cAAA,OAAKC,UAAWyF,EAAQE,KAAK,KAAM5E,QAASzB,EAAM0B,4BCiB5ClC,EAnBD,SAAAQ,GACZ,IAAMuG,EAAcC,OAAOC,SAASC,eAAe,gBAE7CC,EACJpG,EAAAC,EAAAC,cAAAF,EAAAC,EAAA4F,SAAA,KACE7F,EAAAC,EAAAC,cAACmG,EAAD,CAAU1H,KAAMc,EAAMd,KAAMwC,QAAS1B,EAAM0B,UAC3CnB,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,IAAOnB,OACrBe,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,IAAOjB,MAAO+B,QAASzB,EAAM0B,SAC3CnB,EAAAC,EAAAC,cAAA,aACAF,EAAAC,EAAAC,cAAA,cAEDT,EAAMkB,WAKb,OAAO2F,uBAAaF,EAAOJ,qBCNdO,EAbC,WACd,OACEvG,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,IAAOmG,SACrBvG,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,IAAO9B,SACrB0B,EAAAC,EAAAC,cAAA,YACAF,EAAAC,EAAAC,cAAA,YACAF,EAAAC,EAAAC,cAAA,YACAF,EAAAC,EAAAC,cAAA,mCCsBOb,GA7BD,SAAAI,GACZK,QAAQC,IAAI,SAEZ,IAAM6F,EAAU,CAACxF,KAAOf,QACvBI,EAAM+G,OAAS/G,EAAMgH,OAASb,EAAQnE,KAAKrB,KAAO1B,OAEnD,IAAIgI,EAAe1G,EAAAC,EAAAC,cAAA,wBAEnB,OAAQT,EAAMyE,MACZ,IAAK,QACH,OACElE,EAAAC,EAAAC,cAAA,QAAAkD,OAAAuD,OAAA,CACExG,UAAWyF,EAAQE,KAAK,KACxB5B,KAAMzE,EAAMmH,UACZC,KAAMpH,EAAMoH,MACRpH,EAAMqH,OAJZ,CAKEvD,MAAO9D,EAAM8D,MACbwD,SAAUtH,EAAMuH,WAGtB,IAAK,SAEL,IAAK,WACH,OACF,QACE,OAAON,ICPEO,GAlBE,SAAAxH,GACf,OAAO2D,OAAO8D,KAAKzH,EAAM0C,MAAMgF,IAAI,SAACC,EAAKC,GACvC,OACErH,EAAAC,EAAAC,cAACoH,GAAD,CACEC,IAAKH,EAAMC,EACXnD,KAAMzE,EAAM0C,KAAKiF,GAAKlD,KACtB0C,UAAWnH,EAAM0C,KAAKiF,GAAKR,UAC3BC,KAAMO,EACNN,OAAQrH,EAAM0C,KAAKiF,GAAKN,OACxBE,QAAS,SAAAQ,GAAC,OAAI/H,EAAMuH,QAAQQ,EAAGJ,IAC/B7D,MAAO9D,EAAM0C,KAAKiF,GAAK7D,MACvBiD,MAAO/G,EAAM0C,KAAKiF,GAAKZ,MACvBC,MAAOhH,EAAM0C,KAAKiF,GAAKX,WC8KhBpC,KA3KA,SAAA5E,GACbK,QAAQC,IAAI,UADU,IAAA0H,EAGmBC,qBAAW1D,EAAa,CAC/D1F,SAAS,EACTI,MAAO,OALaiJ,EAAAvE,OAAAwB,EAAA,EAAAxB,CAAAqE,EAAA,GAGfG,EAHeD,EAAA,GAGHE,EAHGF,EAAA,GAAAlD,EAQsBC,mBAAS,CACnDoD,MAAO,CACL5D,KAAM,QACN0C,UAAW,QACXE,OAAQ,CACNiB,YAAa,iBAEfxE,MAAO,GACPyE,WAAY,CACVtE,UAAU,EACVI,SAAS,GAEX0C,OAAO,EACPC,OAAO,GAETwB,SAAU,CACR/D,KAAM,QACN0C,UAAW,WACXE,OAAQ,CACNiB,YAAa,YAEfxE,MAAO,GACPyE,WAAY,CACVtE,UAAU,EACVE,UAAW,GAEb4C,OAAO,EACPC,OAAO,GAETyB,WAAY,CACVhE,KAAM,QACN0C,UAAW,WACXE,OAAQ,CACNiB,YAAa,oBAEfxE,MAAO,GACPyE,WAAY,CACVtE,UAAU,EACVE,UAAW,GAEb4C,OAAO,EACPC,OAAO,KAjDW9B,EAAAvB,OAAAwB,EAAA,EAAAxB,CAAAqB,EAAA,GAQf0D,EARexD,EAAA,GAQCyD,EARDzD,EAAA,GAqDhB0D,EAAgB7C,sBAAY,SAAC8C,EAAIpE,GACrC,IAAMqE,EAAMD,EAAGE,cAAcjF,MAC7B6E,EAAkB,SAAAK,GAChB,IAAMC,EAAczF,EAAUwF,EAAUvE,GAAO,CAC7CX,MAAOgF,EACP/B,MAAOlD,EAAciF,EAAKE,EAAUvE,GAAM8D,YAC1CvB,OAAO,IAET,OAAOxD,EAAUwF,EAADrF,OAAAuF,EAAA,EAAAvF,CAAA,GAAec,EAAOwE,OAEvC,IAEGE,EAAgBpD,sBACpB,SAAMqD,GAAN,IAAA1G,EAAA2G,EAkCWC,EAgBAC,EAIAC,EAYAC,EAlEX,OAAA7G,EAAApC,EAAAqC,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,UAkEWyG,EAlEX,SAkEgC/G,GAC5B,OAAOA,EAAK8F,SAAS1E,QAAUpB,EAAK+F,WAAW3E,OAbxC0F,EAtDX,SAsDyB9G,GACrB,IAAIgH,GAAS,EAQb,OAJyB,IAHP/F,OAAO8D,KAAK/E,GAAMiH,OAClC,SAAAhC,GAAG,OAAwB,IAApBjF,EAAKiF,GAAKZ,QAEL3C,SACZsF,GAAS,GAGJA,GAbAH,EAlDX,SAkDoB5D,GAChB,MAAsB,QAAfA,EAAIiE,QAAmC,MAAfjE,EAAIiE,QAjB5BN,EAlCX,SAkCwBO,GAapB,OAZelG,OAAO8D,KAAKoC,GACxBnC,IAAI,SAAAC,GACH,MAAY,UAARA,GAA2B,aAARA,EACdhE,OAAAuF,EAAA,EAAAvF,CAAA,GAAGgE,EAAMkC,EAASlC,GAAK7D,OAEvB,KAGVgG,OAAO,SAACC,EAAKC,GACZ,OAAOrG,OAAAC,EAAA,EAAAD,CAAA,GAAKoG,EAAZ,GAAoBC,IACnB,KA5CP5B,EAAmB,CAAE3D,KAAM,SAEtB+E,EAAcJ,GAHrB,CAAAtG,EAAAE,KAAA,eAIIoF,EAAmB,CACjB3D,KAAM,QACNC,aAAc,0FANpB5B,EAAAM,OAAA,oBAWOqG,EAAqBL,GAX5B,CAAAtG,EAAAE,KAAA,gBAYIoF,EAAmB,CACjB3D,KAAM,QACNC,aAAc,0FAdpB5B,EAAAM,OAAA,yBAmBQV,EAAO4G,EAAaF,GAnB5BtG,EAAAE,KAAA,GAAAJ,EAAApC,EAAAyC,MAqB+BX,EAAeI,IArB9C,SAqBQ2G,EArBRvG,EAAAK,QAwBQoG,EAASF,GACXrJ,EAAM+B,QAAQC,KAAK,YAEnBoG,EAAmB,CAAE3D,KAAM,QAASC,aAAc,yCAClDrE,QAAQC,IAAI+I,KAIhBjB,EAAmB,CAAE3D,KAAM,aAhC7B,yBAAA3B,EAAAO,WAsEA,CAACrD,EAAM+B,UAGHkI,EAAalE,sBAAY,WAC7BqC,EAAmB,CAAE3D,KAAM,WAC1B,IAEH,OACElE,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,IAAOjC,QACpByJ,EAAWlJ,OACVsB,EAAAC,EAAAC,cAACyJ,EAAD,CAAOhL,MAAI,EAACwC,QAASuI,GAClB9B,EAAWlJ,OAGhBsB,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,IAAOhC,MACrB4B,EAAAC,EAAAC,cAAC0J,EAAD,CAAMzJ,UAAWC,IAAOyJ,MACtB7J,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,IAAO/B,OACrB2B,EAAAC,EAAAC,cAAA,4BACAF,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,IAAO9B,SACpBsJ,EAAWtJ,SAAW0B,EAAAC,EAAAC,cAAC4J,EAAD,QAG3B9J,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAC6J,GAAD,CAAU5H,KAAMgG,EAAgBnB,QAASqB,KAE3CrI,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,IAAO7B,MACrByB,EAAAC,EAAAC,cAACyB,EAAD,CAAQR,QAAS,kBAAMyH,EAAcT,KAArC,gBACAnI,EAAAC,EAAAC,cAACyB,EAAD,CAAQR,QAAS,kBAAM1B,EAAM+B,QAAQC,KAAK,aAA1C,qBAQ4BO,yBC5BzBqC,KA/IA,SAAA5E,GACbK,QAAQC,IAAI,UADU,IAAA0H,EAGmBC,qBAAW1D,EAAa,CAC/D1F,SAAS,EACTI,MAAO,OALaiJ,EAAAvE,OAAAwB,EAAA,EAAAxB,CAAAqE,EAAA,GAGfG,EAHeD,EAAA,GAGHE,EAHGF,EAAA,GAAAlD,EAQsBC,mBAAS,CACnDoD,MAAO,CACL5D,KAAM,QACN0C,UAAW,QACXE,OAAQ,CACNiB,YAAa,iBAEfxE,MAAO,GACPyE,WAAY,CACVtE,UAAU,EACVI,SAAS,GAEX0C,OAAO,EACPC,OAAO,GAETwB,SAAU,CACR/D,KAAM,QACN0C,UAAW,WACXE,OAAQ,CACNiB,YAAa,YAEfxE,MAAO,GACPyE,WAAY,CACVtE,UAAU,EACVE,UAAW,GAEb4C,OAAO,EACPC,OAAO,KAnCW9B,EAAAvB,OAAAwB,EAAA,EAAAxB,CAAAqB,EAAA,GAQfuF,EARerF,EAAA,GAQCsF,EARDtF,EAAA,GA+GhB+E,EAAalE,sBAAY,WAC7BqC,EAAmB,CAAE3D,KAAM,WAC1B,IAEH,OACElE,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,KAAO3B,QACpBmJ,EAAWlJ,OACVsB,EAAAC,EAAAC,cAACyJ,EAAD,CAAOhL,MAAI,EAACwC,QAASuI,GAClB9B,EAAWlJ,OAGhBsB,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,KAAOhC,MACrB4B,EAAAC,EAAAC,cAAC0J,EAAD,CAAMzJ,UAAWC,KAAOyJ,MACtB7J,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,KAAO/B,OACrB2B,EAAAC,EAAAC,cAAA,4BACAF,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,KAAO9B,SACpBsJ,EAAWtJ,SAAW0B,EAAAC,EAAAC,cAAC4J,EAAD,QAG3B9J,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAC6J,GAAD,CAAU5H,KAAM6H,EAAgBhD,QA5FpB,SAACsB,EAAIpE,GACzB,IAAMqE,EAAMD,EAAGE,cAAcjF,MAC7B0G,EAAkB,SAAAxB,GAChB,IAAMC,EAAczF,EAAUwF,EAAUvE,GAAO,CAC7CX,MAAOgF,EACP/B,MAAOlD,EAAciF,EAAKE,EAAUvE,GAAM8D,YAC1CvB,OAAO,IAET,OAAOxD,EAAUwF,EAADrF,OAAAuF,EAAA,EAAAvF,CAAA,GAAec,EAAOwE,UAsFlC1I,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,KAAO7B,MACrByB,EAAAC,EAAAC,cAACyB,EAAD,CAAQR,QAAS,kBAnFL,SAAM0H,GAAN,IAAA1G,EAAA+H,EA4BXnB,EAWAoB,EAIAlB,EAWAmB,EAtDW,OAAA/H,EAAApC,EAAAqC,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,UAsDX2H,EAtDW,SAsDLC,GACb/I,aAAagJ,QAAQ,UAAWD,GAChC5K,EAAM+B,QAAQC,KAAK,MAbZwH,EA3CW,SA2CG9G,GACrB,IAAIgH,GAAS,EAOb,OAHyB,IAHP/F,OAAO8D,KAAK/E,GAAMiH,OAClC,SAAAhC,GAAG,OAAwB,IAApBjF,EAAKiF,GAAKZ,QAEL3C,SACZsF,GAAS,GAEJA,GAZAgB,EAvCW,SAuCF/E,GAChB,MAAsB,QAAfA,EAAIiE,QAAmC,MAAfjE,EAAIiE,QAZ5BN,EA5BW,SA4BEO,GAQpB,OAPelG,OAAO8D,KAAKoC,GACxBnC,IAAI,SAAAC,GACH,OAAOhE,OAAAuF,EAAA,EAAAvF,CAAA,GAAGgE,EAAMkC,EAASlC,GAAK7D,SAE/BgG,OAAO,SAACC,EAAKC,GACZ,OAAOrG,OAAAC,EAAA,EAAAD,CAAA,GAAKoG,EAAZ,GAAoBC,IACnB,KAlCP5B,EAAmB,CAAE3D,KAAM,SAEtB+E,EAAcJ,GAHC,CAAAtG,EAAAE,KAAA,eAIlBoF,EAAmB,CACjB3D,KAAM,QACNC,aAAc,0FANE5B,EAAAM,OAAA,wBAWdV,EAAO4G,EAAaF,GAXNtG,EAAAE,KAAA,GAAAJ,EAAApC,EAAAyC,MAaSK,EAAeZ,IAbxB,SAad+H,EAbc3H,EAAAK,QAgBduH,EAASD,GACXE,EAAMF,EAAe/H,KAAKoI,SAE1B1C,EAAmB,CACjB3D,KAAM,QACNC,aAAc,8BAKpB0D,EAAmB,CAAE3D,KAAM,aA1BP,yBAAA3B,EAAAO,UAmFW0H,CAAcR,KAArC,gBACAhK,EAAAC,EAAAC,cAACyB,EAAD,CAAQR,QAAS,kBAAM1B,EAAM+B,QAAQC,KAAK,aAA1C,qBAQ4BO,KCvIzByI,GAnBH,WAGV,OAFA3K,QAAQC,IAAI,OAGVC,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAC0B,EAAA,EAAD,KACGN,aAAaoJ,QAAQ,YACpB1K,EAAAC,EAAAC,cAAC0B,EAAA,EAAD,CAAOhC,KAAK,IAAIY,OAAK,EAACqB,UAAWT,IAEnCpB,EAAAC,EAAAC,cAAC0B,EAAA,EAAD,CAAOhC,KAAK,UAAUiC,UAAW1D,KACjC6B,EAAAC,EAAAC,cAAC0B,EAAA,EAAD,CAAOhC,KAAK,UAAUiC,UAAWpD,KACjCuB,EAAAC,EAAAC,cAAC0B,EAAA,EAAD,CAAUtB,GAAG,OAGfN,EAAAC,EAAAC,cAAA,OAAKyK,GAAG,mBCdRC,GACJ5K,EAAAC,EAAAC,cAACG,EAAA,EAAD,KACEL,EAAAC,EAAAC,cAAC2K,GAAD,OAIJC,IAASC,OAAOH,GAAK1E,SAASC,eAAe","file":"static/js/main.35175ce0.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Signup\":\"Signup_Signup__3l2L_\",\"wrap\":\"Signup_wrap__cnmpo\",\"title\":\"Signup_title__Z-jWB\",\"loading\":\"Signup_loading__19f_W\",\"btns\":\"Signup_btns__3tHBz\",\"popup\":\"Signup_popup__1i9Bu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Signin\":\"Signin_Signin__29Qsq\",\"wrap\":\"Signin_wrap__y1xxj\",\"title\":\"Signin_title__D6oGa\",\"loading\":\"Signin_loading__V8ytj\",\"btns\":\"Signin_btns__30Syc\",\"popup\":\"Signin_popup__36Lt4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"error\":\"withErrorHandler_error__1vxNE\",\"show\":\"withErrorHandler_show__1AZKd\",\"hide\":\"withErrorHandler_hide__GUCvq\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Backdrop\":\"Backdrop_Backdrop__26bb-\",\"hide\":\"Backdrop_hide__1csbP\",\"show\":\"Backdrop_show__OOqWn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Home_header__2lRvt\",\"logout\":\"Home_logout__1brxZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"NavItem\":\"NavItem_NavItem__3anDl\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Modal\":\"Modal_Modal__2Nxic\",\"fadeInDown\":\"Modal_fadeInDown__PIteE\",\"close\":\"Modal_close__2LYPW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loading\":\"Loading_loading__3hxUF\",\"lds-ring\":\"Loading_lds-ring__1VIXi\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Input\":\"Input_Input__2gEm4\",\"error\":\"Input_error__33xaI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Navigation\":\"Navigation_Navigation__UxCuy\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__3Ur4h\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Card\":\"Card_Card__3yI8w\"};","import React from 'react';\r\nimport { NavLink, useRouteMatch } from 'react-router-dom';\r\n\r\nimport styles from './NavItem.module.scss';\r\n\r\nconst NavItem = props => {\r\n  let { path, url } = useRouteMatch();\r\n\r\n  console.log(path);\r\n  console.log(url);\r\n\r\n  return (\r\n    <li className={styles.NavItem}>\r\n      <NavLink\r\n        to={url + props.link}\r\n        exact={props.exact}\r\n        activeClassName={styles.active}\r\n      >\r\n        {props.children}\r\n      </NavLink>\r\n    </li>\r\n  );\r\n};\r\n\r\nexport default NavItem;\r\n","import React from 'react';\r\nimport NavItem from './NavItem/NavItem';\r\n\r\nimport styles from './Navigation.module.scss';\r\n\r\nconst Navigation = () => {\r\n  return (\r\n    <ul className={styles.Navigation}>\r\n      <NavItem link=\"/\" exact>\r\n        TO DO\r\n      </NavItem>\r\n      <NavItem link=\"/done\">Done</NavItem>\r\n    </ul>\r\n  );\r\n};\r\n\r\nexport default Navigation;\r\n","import React from 'react';\r\n\r\nconst Todo = props => {\r\n  console.log('Todo');\r\n  return <div>Todo</div>;\r\n};\r\n\r\nexport default Todo;\r\n","import React from 'react';\r\n\r\nconst Done = () => {\r\n  console.log('Done');\r\n  return <div>Done</div>;\r\n};\r\n\r\nexport default Done;\r\n","import React from 'react';\r\nimport styles from './Button.module.scss';\r\n\r\nconst Button = React.memo(props => {\r\n  console.log('Button');\r\n\r\n  return (\r\n    <button\r\n      className={styles.Button}\r\n      disabled={props.disabled}\r\n      onClick={props.clicked}\r\n    >\r\n      {props.children}\r\n    </button>\r\n  );\r\n});\r\n\r\nexport default React.memo(Button);\r\n","import React from 'react';\r\nimport { Switch, Route, useRouteMatch } from 'react-router-dom';\r\nimport styles from './Home.module.scss';\r\n\r\nimport Navigation from '../../components/Navigation/Navigation';\r\nimport Todo from '../Todo/Todo';\r\nimport Done from '../Done/Done';\r\nimport Button from '../../UI/Button/Button';\r\n\r\nconst Home = props => {\r\n  let { path, url } = useRouteMatch();\r\n\r\n  const signoutHandler = () => {\r\n    localStorage.removeItem('idToken');\r\n    props.history.push('/signin');\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <header className={styles.header}>\r\n        <Navigation logout={signoutHandler} />\r\n        <div className={styles.logout}>\r\n          <Button clicked={signoutHandler}>登出</Button>\r\n        </div>\r\n      </header>\r\n      <main>\r\n        <Switch>\r\n          <Route path=\"/\" exact component={Todo} />\r\n          <Route path=\"/done\" component={Done} />\r\n        </Switch>\r\n      </main>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n","import axios from 'axios';\r\n\r\nconst apiKey = 'AIzaSyAzWGnKUYY8e6g9oASL90g7tj4TjoVCRGg';\r\n\r\nexport const todoInstence = axios.create({\r\n  baseURL: 'https://react-my-test-fb5ea.firebaseio.com/'\r\n});\r\n\r\nexport const signupInstance = async data => {\r\n  const response = await axios.post(\r\n    'https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=' + apiKey,\r\n    data\r\n  );\r\n  return response;\r\n};\r\n\r\nexport const signinInstance = async data => {\r\n  const response = await axios.post(\r\n    'https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=' +\r\n      apiKey,\r\n    data\r\n  );\r\n  return response;\r\n};\r\n","export const updateOBJ = (currentState, updatedState) => {\r\n  return {\r\n    ...currentState,\r\n    ...updatedState\r\n  };\r\n};\r\n\r\nexport const checkValidity = (value, rules) => {\r\n  let isValid = true;\r\n\r\n  if (!rules) return true;\r\n\r\n  if (rules.required) {\r\n    isValid = value.trim() !== '' && isValid;\r\n    if (!isValid) return false;\r\n  }\r\n\r\n  if (rules.minLength) {\r\n    isValid = value.length >= rules.minLength && isValid;\r\n    if (!isValid) return false;\r\n  }\r\n\r\n  if (rules.isEmail) {\r\n    const emailReg = /[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/;\r\n    isValid = emailReg.test(value) && isValid;\r\n    if (!isValid) return false;\r\n  }\r\n\r\n  return true;\r\n};\r\n","export const httpReducer = (currentState, action) => {\r\n  switch (action.type) {\r\n    case 'SEND':\r\n      return { loading: true, error: null };\r\n    case 'RESPONSE':\r\n      return { ...currentState, loading: false };\r\n    case 'ERROR':\r\n      return { loading: false, error: action.errorMessage };\r\n    case 'CLEAR':\r\n      return { loading: false, error: null };\r\n    default:\r\n      throw new Error('Somthing went wrong!');\r\n  }\r\n};\r\n","import React from 'react';\r\nimport styles from './withErrorHandler.module.scss';\r\n\r\nimport useHttpErrorHandler from '../../hooks/http-error-handler';\r\nimport Button from '../../UI/Button/Button';\r\n\r\nconst withErrorHandler = (WrappedComponents, axios) => {\r\n  return props => {\r\n    const [error, clearError] = useHttpErrorHandler(axios);\r\n\r\n    let classes = [styles.error];\r\n    error ? classes.push(styles.show) : classes.push(styles.hide);\r\n\r\n    return (\r\n      <>\r\n        <div className={classes.join(' ')}>\r\n          <p>{error && error.response.data.error.message}</p>\r\n          <Button clicked={clearError}>確認</Button>\r\n        </div>\r\n        <WrappedComponents {...props} />\r\n      </>\r\n    );\r\n  };\r\n};\r\n\r\nexport default withErrorHandler;\r\n","import { useState, useEffect, useCallback } from 'react';\r\n\r\nexport default httpInstance => {\r\n  const [error, setError] = useState(null);\r\n\r\n  const reqInterceptor = httpInstance.interceptors.request.use(req => {\r\n    setError(null);\r\n    return req;\r\n  });\r\n\r\n  const resInterceptor = httpInstance.interceptors.response.use(\r\n    res => res,\r\n    err => {\r\n      setError(err);\r\n    }\r\n  );\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      httpInstance.interceptors.request.eject(reqInterceptor);\r\n      httpInstance.interceptors.response.eject(resInterceptor);\r\n    };\r\n  }, [\r\n    httpInstance.interceptors.request,\r\n    httpInstance.interceptors.response,\r\n    reqInterceptor,\r\n    resInterceptor\r\n  ]);\r\n\r\n  const errorConfirmedHandler = useCallback(() => {\r\n    setError(null);\r\n  }, []);\r\n\r\n  return [error, errorConfirmedHandler];\r\n};\r\n","import React from 'react';\r\nimport styles from './Card.module.scss';\r\n\r\nconst Card = props => <div className={styles.Card}>{props.children}</div>;\r\n\r\nexport default Card;\r\n","import React from 'react';\r\n\r\nimport styles from './Backdrop.module.scss';\r\n\r\nconst Backdrop = props => {\r\n  const classes = [styles.Backdrop];\r\n  props.show ? classes.push(styles.show) : classes.push(styles.hide);\r\n\r\n  return <div className={classes.join(' ')} onClick={props.clicked}></div>;\r\n};\r\n\r\nexport default Backdrop;\r\n","import React from 'react';\r\nimport { createPortal } from 'react-dom';\r\nimport Backdrop from '../Backdrop/Backdrop';\r\n\r\nimport styles from './Modal.module.scss';\r\n\r\nconst Modal = props => {\r\n  const globalModal = window.document.getElementById('global-modal');\r\n\r\n  const modal = (\r\n    <>\r\n      <Backdrop show={props.show} clicked={props.clicked} />\r\n      <div className={styles.Modal}>\r\n        <div className={styles.close} onClick={props.clicked}>\r\n          <span></span>\r\n          <span></span>\r\n        </div>\r\n        {props.children}\r\n      </div>\r\n    </>\r\n  );\r\n\r\n  return createPortal(modal, globalModal);\r\n};\r\n\r\nexport default Modal;\r\n","import React from 'react';\r\nimport styles from './Loading.module.scss';\r\n\r\nconst Loading = () => {\r\n  return (\r\n    <div className={styles.Loading}>\r\n      <div className={styles.loading}>\r\n        <div></div>\r\n        <div></div>\r\n        <div></div>\r\n        <div></div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Loading;\r\n","import React from 'react';\r\nimport styles from './Input.module.scss';\r\n\r\nconst Input = props => {\r\n  console.log('Input');\r\n\r\n  const classes = [styles.Input];\r\n  !props.valid && props.touch && classes.push(styles.error);\r\n\r\n  let inputElement = <p>Input Error</p>;\r\n\r\n  switch (props.type) {\r\n    case 'input':\r\n      return (inputElement = (\r\n        <input\r\n          className={classes.join(' ')}\r\n          type={props.inputType}\r\n          name={props.name}\r\n          {...props.config}\r\n          value={props.value}\r\n          onChange={props.changed}\r\n        />\r\n      ));\r\n    case 'select':\r\n      return;\r\n    case 'textarea':\r\n      return;\r\n    default:\r\n      return inputElement;\r\n  }\r\n};\r\n\r\nexport default Input;\r\n","import React from 'react';\r\nimport Input from '../../UI/Input/Input';\r\n\r\nconst SignForm = props => {\r\n  return Object.keys(props.data).map((itm, idx) => {\r\n    return (\r\n      <Input\r\n        key={itm + idx}\r\n        type={props.data[itm].type}\r\n        inputType={props.data[itm].inputType}\r\n        name={itm}\r\n        config={props.data[itm].config}\r\n        changed={e => props.changed(e, itm)}\r\n        value={props.data[itm].value}\r\n        valid={props.data[itm].valid}\r\n        touch={props.data[itm].touch}\r\n      />\r\n    );\r\n  });\r\n};\r\n\r\nexport default SignForm;\r\n","import React, { useState, useReducer, useCallback } from 'react';\r\nimport styles from './Signup.module.scss';\r\n\r\nimport axios from 'axios';\r\nimport { signupInstance } from '../../axios-instence';\r\n\r\nimport { updateOBJ, checkValidity } from '../../shared/utility';\r\nimport { httpReducer } from '../../shared/reducer';\r\n\r\nimport withErrorHandler from '../../hoc/withErrorHandler/withErrorHandler';\r\n\r\nimport Button from '../../UI/Button/Button';\r\nimport Card from '../../UI/Card/Card';\r\nimport Modal from '../../UI/Modal/Modal';\r\nimport Loading from '../../UI/Loading/Loading';\r\n\r\nimport SignForm from '../../components/SignForm/SignForm';\r\n\r\nconst Signup = props => {\r\n  console.log('SIGNUP');\r\n\r\n  const [httpStatus, dispatchHttpStatus] = useReducer(httpReducer, {\r\n    loading: false,\r\n    error: null\r\n  });\r\n\r\n  const [signupFormData, setSignupFormData] = useState({\r\n    email: {\r\n      type: 'input',\r\n      inputType: 'email',\r\n      config: {\r\n        placeholder: 'email address'\r\n      },\r\n      value: '',\r\n      validRules: {\r\n        required: true,\r\n        isEmail: true\r\n      },\r\n      valid: false,\r\n      touch: false\r\n    },\r\n    password: {\r\n      type: 'input',\r\n      inputType: 'password',\r\n      config: {\r\n        placeholder: 'password'\r\n      },\r\n      value: '',\r\n      validRules: {\r\n        required: true,\r\n        minLength: 6\r\n      },\r\n      valid: false,\r\n      touch: false\r\n    },\r\n    comfirnPsw: {\r\n      type: 'input',\r\n      inputType: 'password',\r\n      config: {\r\n        placeholder: 'comfirn password'\r\n      },\r\n      value: '',\r\n      validRules: {\r\n        required: true,\r\n        minLength: 6\r\n      },\r\n      valid: false,\r\n      touch: false\r\n    }\r\n  });\r\n\r\n  const changeHandler = useCallback((ev, type) => {\r\n    const val = ev.currentTarget.value;\r\n    setSignupFormData(prevState => {\r\n      const updatedData = updateOBJ(prevState[type], {\r\n        value: val,\r\n        valid: checkValidity(val, prevState[type].validRules),\r\n        touch: true\r\n      });\r\n      return updateOBJ(prevState, { [type]: updatedData });\r\n    });\r\n  }, []);\r\n\r\n  const signupHandler = useCallback(\r\n    async formData => {\r\n      dispatchHttpStatus({ type: 'SEND' });\r\n\r\n      if (!checkIsFormOk(formData)) {\r\n        dispatchHttpStatus({\r\n          type: 'ERROR',\r\n          errorMessage: '填入資料不正確,請檢查後再發送'\r\n        });\r\n        return;\r\n      }\r\n\r\n      if (!passwordHasSameValue(formData)) {\r\n        dispatchHttpStatus({\r\n          type: 'ERROR',\r\n          errorMessage: '密碼不一致,請重新輸入後再發送'\r\n        });\r\n        return;\r\n      }\r\n\r\n      const data = getFormValue(formData);\r\n\r\n      const signupResponse = await signupInstance(data);\r\n\r\n      if (signupResponse) {\r\n        if (signupOk(signupResponse)) {\r\n          props.history.push('/signin');\r\n        } else {\r\n          dispatchHttpStatus({ type: 'ERROR', errorMessage: '寫入資料失敗' });\r\n          console.log(signupResponse);\r\n        }\r\n      }\r\n\r\n      dispatchHttpStatus({ type: 'RESPONSE' });\r\n\r\n      function getFormValue(formList) {\r\n        const result = Object.keys(formList)\r\n          .map(itm => {\r\n            if (itm === 'email' || itm === 'password') {\r\n              return { [itm]: formList[itm].value };\r\n            } else {\r\n              return {};\r\n            }\r\n          })\r\n          .reduce((obj, el) => {\r\n            return { ...obj, ...el };\r\n          }, {});\r\n\r\n        return result;\r\n      }\r\n\r\n      function signupOk(res) {\r\n        return res.status === '200' || res.status === 200;\r\n      }\r\n\r\n      function checkIsFormOk(data) {\r\n        let result = false;\r\n        const validData = Object.keys(data).filter(\r\n          itm => data[itm].valid === false\r\n        );\r\n        if (validData.length === 0) {\r\n          result = true;\r\n        }\r\n\r\n        return result;\r\n      }\r\n\r\n      function passwordHasSameValue(data) {\r\n        return data.password.value === data.comfirnPsw.value;\r\n      }\r\n    },\r\n    [props.history]\r\n  );\r\n\r\n  const clearModal = useCallback(() => {\r\n    dispatchHttpStatus({ type: 'CLEAR' });\r\n  }, []);\r\n\r\n  return (\r\n    <div className={styles.Signup}>\r\n      {httpStatus.error && (\r\n        <Modal show clicked={clearModal}>\r\n          {httpStatus.error}\r\n        </Modal>\r\n      )}\r\n      <div className={styles.wrap}>\r\n        <Card className={styles.card}>\r\n          <div className={styles.title}>\r\n            <span>註冊</span>\r\n            <div className={styles.loading}>\r\n              {httpStatus.loading && <Loading />}\r\n            </div>\r\n          </div>\r\n          <div>\r\n            <SignForm data={signupFormData} changed={changeHandler} />\r\n          </div>\r\n          <div className={styles.btns}>\r\n            <Button clicked={() => signupHandler(signupFormData)}>送出</Button>\r\n            <Button clicked={() => props.history.push('/signin')}>登入</Button>\r\n          </div>\r\n        </Card>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default withErrorHandler(Signup, axios);\r\n","import React, { useState, useReducer, useCallback } from 'react';\r\nimport styles from './Signin.module.scss';\r\n\r\nimport axios from 'axios';\r\nimport { signinInstance } from '../../axios-instence';\r\n\r\nimport { updateOBJ, checkValidity } from '../../shared/utility';\r\nimport { httpReducer } from '../../shared/reducer';\r\n\r\nimport withErrorHandler from '../../hoc/withErrorHandler/withErrorHandler';\r\n\r\nimport Button from '../../UI/Button/Button';\r\nimport Card from '../../UI/Card/Card';\r\nimport Modal from '../../UI/Modal/Modal';\r\nimport Loading from '../../UI/Loading/Loading';\r\n\r\nimport SignForm from '../../components/SignForm/SignForm';\r\n\r\nconst Signin = props => {\r\n  console.log('SIGNIN');\r\n\r\n  const [httpStatus, dispatchHttpStatus] = useReducer(httpReducer, {\r\n    loading: false,\r\n    error: null\r\n  });\r\n\r\n  const [signinFormData, setSigninFormData] = useState({\r\n    email: {\r\n      type: 'input',\r\n      inputType: 'email',\r\n      config: {\r\n        placeholder: 'email address'\r\n      },\r\n      value: '',\r\n      validRules: {\r\n        required: true,\r\n        isEmail: true\r\n      },\r\n      valid: false,\r\n      touch: false\r\n    },\r\n    password: {\r\n      type: 'input',\r\n      inputType: 'password',\r\n      config: {\r\n        placeholder: 'password'\r\n      },\r\n      value: '',\r\n      validRules: {\r\n        required: true,\r\n        minLength: 6\r\n      },\r\n      valid: false,\r\n      touch: false\r\n    }\r\n  });\r\n\r\n  const changeHandler = (ev, type) => {\r\n    const val = ev.currentTarget.value;\r\n    setSigninFormData(prevState => {\r\n      const updatedData = updateOBJ(prevState[type], {\r\n        value: val,\r\n        valid: checkValidity(val, prevState[type].validRules),\r\n        touch: true\r\n      });\r\n      return updateOBJ(prevState, { [type]: updatedData });\r\n    });\r\n  };\r\n\r\n  const signinHandler = async formData => {\r\n    dispatchHttpStatus({ type: 'SEND' });\r\n\r\n    if (!checkIsFormOk(formData)) {\r\n      dispatchHttpStatus({\r\n        type: 'ERROR',\r\n        errorMessage: '填入資料不正確,請檢查後再發送'\r\n      });\r\n      return;\r\n    }\r\n\r\n    const data = getFormValue(formData);\r\n\r\n    const signinResponse = await signinInstance(data);\r\n\r\n    if (signinResponse) {\r\n      if (signinOk(signinResponse)) {\r\n        login(signinResponse.data.idToken);\r\n      } else {\r\n        dispatchHttpStatus({\r\n          type: 'ERROR',\r\n          errorMessage: '登入失敗'\r\n        });\r\n      }\r\n    }\r\n\r\n    dispatchHttpStatus({ type: 'RESPONSE' });\r\n\r\n    function getFormValue(formList) {\r\n      const result = Object.keys(formList)\r\n        .map(itm => {\r\n          return { [itm]: formList[itm].value };\r\n        })\r\n        .reduce((obj, el) => {\r\n          return { ...obj, ...el };\r\n        }, {});\r\n      return result;\r\n    }\r\n\r\n    function signinOk(res) {\r\n      return res.status === '200' || res.status === 200;\r\n    }\r\n\r\n    function checkIsFormOk(data) {\r\n      let result = false;\r\n      const validData = Object.keys(data).filter(\r\n        itm => data[itm].valid === false\r\n      );\r\n      if (validData.length === 0) {\r\n        result = true;\r\n      }\r\n      return result;\r\n    }\r\n\r\n    function login(token) {\r\n      localStorage.setItem('idToken', token);\r\n      props.history.push('/');\r\n    }\r\n  };\r\n\r\n  const clearModal = useCallback(() => {\r\n    dispatchHttpStatus({ type: 'CLEAR' });\r\n  }, []);\r\n\r\n  return (\r\n    <div className={styles.Signin}>\r\n      {httpStatus.error && (\r\n        <Modal show clicked={clearModal}>\r\n          {httpStatus.error}\r\n        </Modal>\r\n      )}\r\n      <div className={styles.wrap}>\r\n        <Card className={styles.card}>\r\n          <div className={styles.title}>\r\n            <span>登入</span>\r\n            <div className={styles.loading}>\r\n              {httpStatus.loading && <Loading />}\r\n            </div>\r\n          </div>\r\n          <div>\r\n            <SignForm data={signinFormData} changed={changeHandler} />\r\n          </div>\r\n          <div className={styles.btns}>\r\n            <Button clicked={() => signinHandler(signinFormData)}>送出</Button>\r\n            <Button clicked={() => props.history.push('/signup')}>註冊</Button>\r\n          </div>\r\n        </Card>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default withErrorHandler(Signin, axios);\r\n","import React from 'react';\nimport { Switch, Route, Redirect } from 'react-router-dom';\n\nimport Home from './containers/Home/Home';\nimport Signup from './containers/Signup/Signup';\nimport Signin from './containers/Signin/Signin';\n\nconst App = () => {\n  console.log('APP');\n\n  return (\n    <div>\n      <Switch>\n        {localStorage.getItem('idToken') && (\n          <Route path=\"/\" exact component={Home} />\n        )}\n        <Route path=\"/signup\" component={Signup} />\n        <Route path=\"/signin\" component={Signin} />\n        <Redirect to=\"/\" />\n      </Switch>\n\n      <div id=\"global-modal\"></div>\n    </div>\n  );\n};\n\nexport default App;\n\n// import React, { useState, useCallback, useRef } from 'react';\n// import Button from './UI/Button/Button';\n\n// const List = React.memo(\n//   props => {\n//     console.log('List');\n//     return <li onClick={props.clicked}>{props.children}</li>;\n//   },\n//   (prevProps, currentProps) => {\n//     if (prevProps.children === currentProps.children) {\n//       return true;\n//     }\n//   }\n// );\n\n// const App = () => {\n//   console.log('App');\n//   const [listData, setListData] = useState([]);\n//   const inputEl = useRef(null);\n\n//   const submitHandler = useCallback(() => {\n//     if (inputEl.current.value.trim() !== '') {\n//       setListData(prevState => {\n//         return [...prevState, inputEl.current.value];\n//       });\n//     }\n//   }, []);\n\n//   const deleteList = useCallback(\n//     item => {\n//       const list = listData.filter(itm => itm !== item);\n//       setListData([...list]);\n//     },\n//     [listData]\n//   );\n\n//   return (\n//     <div>\n//       <input ref={inputEl} type=\"text\" />\n//       <ul>\n//         {listData.map((itm, idx) => (\n//           <List key={itm + idx} clicked={() => deleteList(itm)}>\n//             {itm}\n//           </List>\n//         ))}\n//       </ul>\n//       <Button clicked={submitHandler}>click me</Button>\n//     </div>\n//   );\n// };\n\n// export default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\n\nimport './index.scss';\nimport App from './App';\n\nconst app = (\n  <BrowserRouter>\n    <App />\n  </BrowserRouter>\n);\n\nReactDOM.render(app, document.getElementById('root'));\n"],"sourceRoot":""}