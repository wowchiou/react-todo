(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t,n){e.exports={Signup:"Signup_Signup__HxM2G",wrap:"Signup_wrap__1M42O",title:"Signup_title__35SL0",loading:"Signup_loading__39rvN",btns:"Signup_btns__2zGiS",popup:"Signup_popup__3D6tu"}},14:function(e,t,n){e.exports={Signin:"Signin_Signin__29PCt",wrap:"Signin_wrap__3ftIN",title:"Signin_title__2oYXY",loading:"Signin_loading__1BwJT",btns:"Signin_btns__apeSs",popup:"Signin_popup__LnR_F"}},16:function(e,t,n){e.exports={Todo:"Todo_Todo__hx4er",addBar:"Todo_addBar__2eopu",loading:"Todo_loading__2SNz9"}},19:function(e,t,n){e.exports={error:"withErrorHandler_error__17OP8",show:"withErrorHandler_show__2-T-b",hide:"withErrorHandler_hide__uIUIb"}},20:function(e,t,n){e.exports={Backdrop:"Backdrop_Backdrop__haGuA",hide:"Backdrop_hide__YutH5",show:"Backdrop_show__3d7qs"}},22:function(e,t,n){e.exports={header:"Layout_header__2xoJq",logout:"Layout_logout__3vwyF"}},23:function(e,t,n){e.exports={NavItem:"NavItem_NavItem__aPQlA"}},26:function(e,t,n){e.exports={Input:"Input_Input__mWMod",error:"Input_error__57kT7"}},27:function(e,t,n){e.exports={TodoList:"TodoList_TodoList__W7Ezu",nothing:"TodoList_nothing__2Hm--"}},28:function(e,t,n){e.exports={TodoItem:"TodoItem_TodoItem__1TRFF",btns:"TodoItem_btns__1zLCr"}},29:function(e,t,n){e.exports={loading:"Loading_loading__utX7h","lds-ring":"Loading_lds-ring__1K9EY"}},30:function(e,t,n){e.exports={Modal:"Modal_Modal__2-3xg",fadeInDown:"Modal_fadeInDown__3qMva",close:"Modal_close__3Bb7f"}},41:function(e,t,n){e.exports={Button:"Button_Button__3Is6j"}},44:function(e,t,n){e.exports={Navigation:"Navigation_Navigation__1E364"}},45:function(e,t,n){e.exports={Card:"Card_Card__ReLmv"}},46:function(e,t,n){e.exports=n(75)},51:function(e,t,n){},75:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(18),o=n.n(c),i=n(15),l=(n(51),n(11)),u=n(6),s=n(2),d=n(3),m=n(16),p=n.n(m),f=n(8),g=n.n(f),E=n(10),_=n.n(E),h="AIzaSyAzWGnKUYY8e6g9oASL90g7tj4TjoVCRGg",v=_.a.create({baseURL:"https://react-my-test-fb5ea.firebaseio.com/"}),b=function(e){var t;return g.a.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,g.a.awrap(_.a.post("https://identitytoolkit.googleapis.com/v1/accounts:signUp?key="+h,e));case 2:return t=n.sent,n.abrupt("return",t);case 4:case"end":return n.stop()}})},w=function(e){var t;return g.a.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,g.a.awrap(_.a.post("https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key="+h,e));case 2:return t=n.sent,n.abrupt("return",t);case 4:case"end":return n.stop()}})},O=n(19),j=n.n(O),y=n(41),k=n.n(y),N=r.a.memo(function(e){return console.log("Button"),r.a.createElement("button",{className:k.a.Button,disabled:e.disabled,onClick:e.clicked},e.children)}),S=r.a.memo(N),R=function(e,t){return function(n){var c=function(e){var t=Object(a.useState)(null),n=Object(d.a)(t,2),r=n[0],c=n[1],o=e.interceptors.request.use(function(e){return c(null),e}),i=e.interceptors.response.use(function(e){return e},function(e){c(e)});return Object(a.useEffect)(function(){return function(){e.interceptors.request.eject(o),e.interceptors.response.eject(i)}},[e.interceptors.request,e.interceptors.response,o,i]),[r,Object(a.useCallback)(function(){c(null)},[])]}(t),o=Object(d.a)(c,2),i=o[0],l=o[1],u=[j.a.error];i?u.push(j.a.show):u.push(j.a.hide);var s="";return i&&i.response?s=i.response.data.error.message:i&&!i.response&&(s="\u8acb\u78ba\u8a8d\u7db2\u8def\u9023\u7dda"),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:u.join(" ")},r.a.createElement("p",null,s),r.a.createElement(S,{clicked:l},"\u78ba\u8a8d")),r.a.createElement(e,n))}},T=n(22),x=n.n(T),I=n(23),L=n.n(I),C=function(e){return r.a.createElement("li",{className:L.a.NavItem},r.a.createElement(i.b,{to:e.link,exact:e.exact,activeClassName:L.a.active},e.children))},D=n(44),B=n.n(D),M=function(){return r.a.createElement("ul",{className:B.a.Navigation},r.a.createElement(C,{link:"/",exact:!0},"TODO"),r.a.createElement(C,{link:"/done"},"Done"))},z=Object(l.g)(function(e){console.log("layout");return localStorage.getItem("idToken")||e.history.push("/signin"),r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:x.a.header},r.a.createElement(M,null),r.a.createElement("div",{className:x.a.logout},r.a.createElement(S,{clicked:function(){localStorage.removeItem("idToken"),e.history.push("/signin")}},"\u767b\u51fa"))),r.a.createElement("main",null,e.children))}),P=n(26),q=n.n(P),F=function(e){console.log("Input");var t=[q.a.Input];!e.valid&&e.touch&&t.push(q.a.error);var n=r.a.createElement("p",null,"Input Error");switch(e.type){case"input":return r.a.createElement("input",Object.assign({className:t.join(" "),type:e.inputType,name:e.name},e.config,{value:e.value,onChange:e.changed}));case"select":case"textarea":return;default:return n}},A=n(27),G=n.n(A),H=n(28),Y=n.n(H),U=function(e){return r.a.createElement("li",{className:Y.a.TodoItem},r.a.createElement("p",null,e.item),r.a.createElement("div",{className:Y.a.btns},r.a.createElement(S,{clicked:function(){e.onFinished(e.itemId)}},"\u5b8c\u6210"),r.a.createElement(S,{clicked:function(){e.onDeleted(e.itemId)}},"\u522a\u9664")))},J=function(e){var t=r.a.createElement("li",{className:G.a.nothing},"\u76ee\u524d\u7121\u4ee3\u8fa6\u4e8b\u9805");return e.list&&(t=Object.keys(e.list).map(function(t){if(!e.list[t].isDone)return r.a.createElement(U,{itemId:t,key:t,item:e.list[t].item,onFinished:e.onFinished,onDeleted:e.onDeleted})})),r.a.createElement("ul",{className:G.a.TodoList},t)},W=n(29),K=n.n(W),X=function(){return r.a.createElement("div",{className:K.a.Loading},r.a.createElement("div",{className:K.a.loading},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null)))},$=R(function(e){console.log("Todo");var t=Object(a.useState)(""),n=Object(d.a)(t,2),c=n[0],o=n[1],i=Object(a.useState)(null),l=Object(d.a)(i,2),m=l[0],f=l[1],g=Object(a.useState)(!1),E=Object(d.a)(g,2),_=E[0],h=E[1];return Object(a.useEffect)(function(){h(!0),v.get("/todo/wowchiou.json").then(function(e){f(e.data),h(!1)})},[]),r.a.createElement(z,null,r.a.createElement("div",{className:p.a.Todo},r.a.createElement("h2",{className:p.a.title},"\u65b0\u589e\u9805\u76ee"),r.a.createElement("div",{className:p.a.addBar},r.a.createElement(F,{type:"input",inputType:"text",name:"add-todo",value:c,changed:function(e){o(e.target.value)},config:{placeholder:"\u8acb\u8f38\u5165\u65b0\u589e\u9805\u76ee"}}),r.a.createElement(S,{clicked:function(){h(!0);var e={item:c,isDone:!1};v.post("/todo/wowchiou.json",e).then(function(t){f(function(n){return Object(s.a)({},n,Object(u.a)({},t.data.name,Object(s.a)({},e)))}),o(""),h(!1)})}},"ADD")),r.a.createElement("h2",{className:p.a.title},"\u5f85\u5b8c\u6210\u9805\u76ee",r.a.createElement("div",{className:p.a.loading},_&&r.a.createElement(X,null))),r.a.createElement(J,{list:m,onFinished:function(e){h(!0);var t=m,n=Object.keys(t).map(function(n){if(n===e)return t[n]}).reduce(function(e,t){return Object(s.a)({},e,{},t,{isDone:!0})},{});v.put("/todo/wowchiou/".concat(e,".json"),n).then(function(t){f(function(t){return Object(s.a)({},t,Object(u.a)({},e,Object(s.a)({},n)))}),h(!1)})},onDeleted:function(e){h(!0),v.delete("/todo/wowchiou/".concat(e,".json")).then(function(t){var n=Object.keys(m).map(function(t){if(t!==e)return Object(u.a)({},t,Object(s.a)({},m[t]))}).reduce(function(e,t){return Object(s.a)({},e,{},t)},{});f(Object(s.a)({},n)),h(!1)})}})))},v),Q=function(){return console.log("Done"),r.a.createElement(z,null,"Done")},V=n(13),Z=n.n(V),ee=function(e,t){return Object(s.a)({},e,{},t)},te=function(e,t){var n=!0;if(!t)return!0;if(t.required&&!(n=""!==e.trim()&&n))return!1;if(t.minLength&&!(n=e.length>=t.minLength&&n))return!1;if(t.isEmail){if(!(n=/[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/.test(e)&&n))return!1}return!0},ne=function(e,t){switch(t.type){case"SEND":return{loading:!0,error:null};case"RESPONSE":return Object(s.a)({},e,{loading:!1});case"ERROR":return{loading:!1,error:t.errorMessage};case"CLEAR":return{loading:!1,error:null};default:throw new Error("Somthing went wrong!")}},ae=n(45),re=n.n(ae),ce=function(e){return r.a.createElement("div",{className:re.a.Card},e.children)},oe=n(20),ie=n.n(oe),le=function(e){var t=[ie.a.Backdrop];return e.show?t.push(ie.a.show):t.push(ie.a.hide),r.a.createElement("div",{className:t.join(" "),onClick:e.clicked})},ue=n(30),se=n.n(ue),de=function(e){var t=window.document.getElementById("global-modal"),n=r.a.createElement(r.a.Fragment,null,console.log(e.show),r.a.createElement(le,{show:e.show,clicked:e.clicked}),r.a.createElement("div",{className:se.a.Modal},r.a.createElement("div",{className:se.a.close,onClick:e.clicked},r.a.createElement("span",null),r.a.createElement("span",null)),e.children));return Object(c.createPortal)(n,t)},me=function(e){return Object.keys(e.data).map(function(t,n){return r.a.createElement(F,{key:t+n,type:e.data[t].type,inputType:e.data[t].inputType,name:t,config:e.data[t].config,changed:function(n){return e.changed(n,t)},value:e.data[t].value,valid:e.data[t].valid,touch:e.data[t].touch})})},pe=R(function(e){console.log("SIGNUP");var t=Object(a.useReducer)(ne,{loading:!1,error:null}),n=Object(d.a)(t,2),c=n[0],o=n[1],i=Object(a.useState)({email:{type:"input",inputType:"email",config:{placeholder:"email address"},value:"",validRules:{required:!0,isEmail:!0},valid:!1,touch:!1},password:{type:"input",inputType:"password",config:{placeholder:"password"},value:"",validRules:{required:!0,minLength:6},valid:!1,touch:!1},comfirnPsw:{type:"input",inputType:"password",config:{placeholder:"comfirn password"},value:"",validRules:{required:!0,minLength:6},valid:!1,touch:!1}}),l=Object(d.a)(i,2),m=l[0],p=l[1],f=Object(a.useCallback)(function(e,t){var n=e.currentTarget.value;p(function(e){var a=ee(e[t],{value:n,valid:te(n,e[t].validRules),touch:!0});return ee(e,Object(u.a)({},t,a))})},[]),E=Object(a.useCallback)(function(t){var n,a,r,c,i,l;return g.a.async(function(d){for(;;)switch(d.prev=d.next){case 0:if(l=function(e){return e.password.value===e.comfirnPsw.value},i=function(e){var t=!1;return 0===Object.keys(e).filter(function(t){return!1===e[t].valid}).length&&(t=!0),t},c=function(e){return"200"===e.status||200===e.status},r=function(e){return Object.keys(e).map(function(t){return"email"===t||"password"===t?Object(u.a)({},t,e[t].value):{}}).reduce(function(e,t){return Object(s.a)({},e,{},t)},{})},o({type:"SEND"}),i(t)){d.next=8;break}return o({type:"ERROR",errorMessage:"\u586b\u5165\u8cc7\u6599\u4e0d\u6b63\u78ba,\u8acb\u6aa2\u67e5\u5f8c\u518d\u767c\u9001"}),d.abrupt("return");case 8:if(l(t)){d.next=11;break}return o({type:"ERROR",errorMessage:"\u5bc6\u78bc\u4e0d\u4e00\u81f4,\u8acb\u91cd\u65b0\u8f38\u5165\u5f8c\u518d\u767c\u9001"}),d.abrupt("return");case 11:return n=r(t),d.next=14,g.a.awrap(b(n));case 14:(a=d.sent)&&(c(a)?e.history.push("/signin"):(o({type:"ERROR",errorMessage:"\u5beb\u5165\u8cc7\u6599\u5931\u6557"}),console.log(a))),o({type:"RESPONSE"});case 17:case"end":return d.stop()}})},[e.history]),_=Object(a.useCallback)(function(){o({type:"CLEAR"})},[]);return r.a.createElement("div",{className:Z.a.Signup},c.error&&r.a.createElement(de,{show:!0,clicked:_},c.error),r.a.createElement("div",{className:Z.a.wrap},r.a.createElement(ce,{className:Z.a.card},r.a.createElement("div",{className:Z.a.title},r.a.createElement("span",null,"\u8a3b\u518a"),r.a.createElement("div",{className:Z.a.loading},c.loading&&r.a.createElement(X,null))),r.a.createElement("div",null,r.a.createElement(me,{data:m,changed:f})),r.a.createElement("div",{className:Z.a.btns},r.a.createElement(S,{clicked:function(){return E(m)}},"\u9001\u51fa"),r.a.createElement(S,{clicked:function(){return e.history.push("/signin")}},"\u767b\u5165")))))},_.a),fe=n(14),ge=n.n(fe),Ee=R(function(e){console.log("SIGNIN");var t=Object(a.useReducer)(ne,{loading:!1,error:null}),n=Object(d.a)(t,2),c=n[0],o=n[1],i=Object(a.useState)({email:{type:"input",inputType:"email",config:{placeholder:"email address"},value:"",validRules:{required:!0,isEmail:!0},valid:!1,touch:!1},password:{type:"input",inputType:"password",config:{placeholder:"password"},value:"",validRules:{required:!0,minLength:6},valid:!1,touch:!1}}),l=Object(d.a)(i,2),m=l[0],p=l[1],f=Object(a.useCallback)(function(){o({type:"CLEAR"})},[]);return r.a.createElement("div",{className:ge.a.Signin},c.error&&r.a.createElement(de,{show:!0,clicked:f},c.error),r.a.createElement("div",{className:ge.a.wrap},r.a.createElement(ce,{className:ge.a.card},r.a.createElement("div",{className:ge.a.title},r.a.createElement("span",null,"\u767b\u5165"),r.a.createElement("div",{className:ge.a.loading},c.loading&&r.a.createElement(X,null))),r.a.createElement("div",null,r.a.createElement(me,{data:m,changed:function(e,t){var n=e.currentTarget.value;p(function(e){var a=ee(e[t],{value:n,valid:te(n,e[t].validRules),touch:!0});return ee(e,Object(u.a)({},t,a))})}})),r.a.createElement("div",{className:ge.a.btns},r.a.createElement(S,{clicked:function(){return function(t){var n,a,r,c,i,l;return g.a.async(function(d){for(;;)switch(d.prev=d.next){case 0:if(l=function(t){localStorage.setItem("idToken",t),e.history.push("/")},i=function(e){var t=!1;return 0===Object.keys(e).filter(function(t){return!1===e[t].valid}).length&&(t=!0),t},c=function(e){return"200"===e.status||200===e.status},r=function(e){return Object.keys(e).map(function(t){return Object(u.a)({},t,e[t].value)}).reduce(function(e,t){return Object(s.a)({},e,{},t)},{})},o({type:"SEND"}),i(t)){d.next=8;break}return o({type:"ERROR",errorMessage:"\u586b\u5165\u8cc7\u6599\u4e0d\u6b63\u78ba,\u8acb\u6aa2\u67e5\u5f8c\u518d\u767c\u9001"}),d.abrupt("return");case 8:return n=r(t),d.next=11,g.a.awrap(w(n));case 11:(a=d.sent)&&(c(a)?l(a.data.idToken):o({type:"ERROR",errorMessage:"\u767b\u5165\u5931\u6557"})),o({type:"RESPONSE"});case 14:case"end":return d.stop()}})}(m)}},"\u9001\u51fa"),r.a.createElement(S,{clicked:function(){return e.history.push("/signup")}},"\u8a3b\u518a")))))},_.a),_e=function(){return console.log("APP"),r.a.createElement("div",null,r.a.createElement(l.d,null,r.a.createElement(l.b,{path:"/",exact:!0,component:$}),r.a.createElement(l.b,{path:"/done",component:Q}),r.a.createElement(l.b,{path:"/signup",component:pe}),r.a.createElement(l.b,{path:"/signin",component:Ee}),r.a.createElement(l.a,{to:"/"})),r.a.createElement("div",{id:"global-modal"}))},he=r.a.createElement(i.a,null,r.a.createElement(_e,null));o.a.render(he,document.getElementById("root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.509c5059.chunk.js.map