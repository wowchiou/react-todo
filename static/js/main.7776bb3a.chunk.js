(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t,a){e.exports={Signup:"Signup_Signup__HxM2G",wrap:"Signup_wrap__1M42O",title:"Signup_title__35SL0",loading:"Signup_loading__39rvN",btns:"Signup_btns__2zGiS",popup:"Signup_popup__3D6tu"}},14:function(e,t,a){e.exports={Signin:"Signin_Signin__29PCt",wrap:"Signin_wrap__3ftIN",title:"Signin_title__2oYXY",loading:"Signin_loading__1BwJT",btns:"Signin_btns__apeSs",popup:"Signin_popup__LnR_F"}},16:function(e,t,a){e.exports={Todo:"Todo_Todo__hx4er",addBar:"Todo_addBar__2eopu"}},19:function(e,t,a){e.exports={error:"withErrorHandler_error__17OP8",show:"withErrorHandler_show__2-T-b",hide:"withErrorHandler_hide__uIUIb"}},20:function(e,t,a){e.exports={Backdrop:"Backdrop_Backdrop__haGuA",hide:"Backdrop_hide__YutH5",show:"Backdrop_show__3d7qs"}},22:function(e,t,a){e.exports={header:"Layout_header__2xoJq",logout:"Layout_logout__3vwyF"}},23:function(e,t,a){e.exports={NavItem:"NavItem_NavItem__aPQlA"}},26:function(e,t,a){e.exports={Input:"Input_Input__mWMod",error:"Input_error__57kT7"}},27:function(e,t,a){e.exports={Modal:"Modal_Modal__2-3xg",fadeInDown:"Modal_fadeInDown__3qMva",close:"Modal_close__3Bb7f"}},28:function(e,t,a){e.exports={loading:"Loading_loading__utX7h","lds-ring":"Loading_lds-ring__1K9EY"}},41:function(e,t,a){e.exports={Navigation:"Navigation_Navigation__1E364"}},42:function(e,t,a){e.exports={Button:"Button_Button__3Is6j"}},43:function(e,t,a){e.exports={Card:"Card_Card__ReLmv"}},44:function(e,t,a){e.exports=a(73)},49:function(e,t,a){},73:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(18),o=a.n(c),l=a(15),i=(a(49),a(11)),u=a(4),s=a(16),d=a.n(s),p=a(6),m=a.n(p),g=a(9),f=a.n(g),v="AIzaSyAzWGnKUYY8e6g9oASL90g7tj4TjoVCRGg",E=f.a.create({baseURL:"https://react-my-test-fb5ea.firebaseio.com/"}),h=function(e){var t;return m.a.async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,m.a.awrap(f.a.post("https://identitytoolkit.googleapis.com/v1/accounts:signUp?key="+v,e));case 2:return t=a.sent,a.abrupt("return",t);case 4:case"end":return a.stop()}})},_=function(e){var t;return m.a.async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,m.a.awrap(f.a.post("https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key="+v,e));case 2:return t=a.sent,a.abrupt("return",t);case 4:case"end":return a.stop()}})},b=a(22),w=a.n(b),y=a(23),k=a.n(y),N=function(e){return r.a.createElement("li",{className:k.a.NavItem},r.a.createElement(l.b,{to:e.link,exact:e.exact,activeClassName:k.a.active},e.children))},O=a(41),j=a.n(O),S=function(){return r.a.createElement("ul",{className:j.a.Navigation},r.a.createElement(N,{link:"/",exact:!0},"TODO"),r.a.createElement(N,{link:"/done"},"Done"))},R=a(42),x=a.n(R),I=r.a.memo(function(e){return console.log("Button"),r.a.createElement("button",{className:x.a.Button,disabled:e.disabled,onClick:e.clicked},e.children)}),T=r.a.memo(I),C=Object(i.g)(function(e){console.log("layout");return localStorage.getItem("idToken")||e.history.push("/signin"),r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:w.a.header},r.a.createElement(S,null),r.a.createElement("div",{className:w.a.logout},r.a.createElement(T,{clicked:function(){localStorage.removeItem("idToken"),e.history.push("/signin")}},"\u767b\u51fa"))),r.a.createElement("main",null,e.children))}),B=a(26),L=a.n(B),M=function(e){console.log("Input");var t=[L.a.Input];!e.valid&&e.touch&&t.push(L.a.error);var a=r.a.createElement("p",null,"Input Error");switch(e.type){case"input":return r.a.createElement("input",Object.assign({className:t.join(" "),type:e.inputType,name:e.name},e.config,{value:e.value,onChange:e.changed}));case"select":case"textarea":return;default:return a}},P=function(e){console.log("Todo");var t=Object(n.useState)(""),a=Object(u.a)(t,2),c=a[0],o=a[1];return r.a.createElement(C,null,r.a.createElement("div",{className:d.a.Todo},r.a.createElement("h2",{className:d.a.title},"\u65b0\u589e\u9805\u76ee"),r.a.createElement("div",{className:d.a.addBar},r.a.createElement(M,{type:"input",inputType:"text",name:"add-todo",value:c,changed:function(e){o(e.target.value)},config:{placeholder:"\u8acb\u8f38\u5165\u65b0\u589e\u9805\u76ee"}}),r.a.createElement(T,{clicked:function(){E.post("/todo/wowchiou",{item:c}).then(function(e){console.log(e)})}},"ADD")),r.a.createElement("h2",{className:d.a.title},"\u5f85\u5b8c\u6210\u9805\u76ee"),r.a.createElement("div",{className:d.a.items},"\u5f85\u5b8c\u6210\u9805\u76ee")))},q=function(){return console.log("Done"),r.a.createElement("div",null,r.a.createElement(C,null,"Done"))},D=a(8),z=a(10),A=a(13),G=a.n(A),Y=function(e,t){return Object(D.a)({},e,{},t)},F=function(e,t){var a=!0;if(!t)return!0;if(t.required&&!(a=""!==e.trim()&&a))return!1;if(t.minLength&&!(a=e.length>=t.minLength&&a))return!1;if(t.isEmail){if(!(a=/[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/.test(e)&&a))return!1}return!0},H=function(e,t){switch(t.type){case"SEND":return{loading:!0,error:null};case"RESPONSE":return Object(D.a)({},e,{loading:!1});case"ERROR":return{loading:!1,error:t.errorMessage};case"CLEAR":return{loading:!1,error:null};default:throw new Error("Somthing went wrong!")}},U=a(19),J=a.n(U),W=function(e,t){return function(a){var c=function(e){var t=Object(n.useState)(null),a=Object(u.a)(t,2),r=a[0],c=a[1],o=e.interceptors.request.use(function(e){return c(null),e}),l=e.interceptors.response.use(function(e){return e},function(e){c(e)});return Object(n.useEffect)(function(){return function(){e.interceptors.request.eject(o),e.interceptors.response.eject(l)}},[e.interceptors.request,e.interceptors.response,o,l]),[r,Object(n.useCallback)(function(){c(null)},[])]}(t),o=Object(u.a)(c,2),l=o[0],i=o[1],s=[J.a.error];l?s.push(J.a.show):s.push(J.a.hide);var d="";return l&&l.response?d=l.response.data.error.message:l&&!l.response&&(d="\u8acb\u78ba\u8a8d\u7db2\u8def\u9023\u7dda"),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:s.join(" ")},r.a.createElement("p",null,d),r.a.createElement(T,{clicked:i},"\u78ba\u8a8d")),r.a.createElement(e,a))}},K=a(43),X=a.n(K),$=function(e){return r.a.createElement("div",{className:X.a.Card},e.children)},Q=a(20),V=a.n(Q),Z=function(e){var t=[V.a.Backdrop];return e.show?t.push(V.a.show):t.push(V.a.hide),r.a.createElement("div",{className:t.join(" "),onClick:e.clicked})},ee=a(27),te=a.n(ee),ae=function(e){var t=window.document.getElementById("global-modal"),a=r.a.createElement(r.a.Fragment,null,console.log(e.show),r.a.createElement(Z,{show:e.show,clicked:e.clicked}),r.a.createElement("div",{className:te.a.Modal},r.a.createElement("div",{className:te.a.close,onClick:e.clicked},r.a.createElement("span",null),r.a.createElement("span",null)),e.children));return Object(c.createPortal)(a,t)},ne=a(28),re=a.n(ne),ce=function(){return r.a.createElement("div",{className:re.a.Loading},r.a.createElement("div",{className:re.a.loading},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null)))},oe=function(e){return Object.keys(e.data).map(function(t,a){return r.a.createElement(M,{key:t+a,type:e.data[t].type,inputType:e.data[t].inputType,name:t,config:e.data[t].config,changed:function(a){return e.changed(a,t)},value:e.data[t].value,valid:e.data[t].valid,touch:e.data[t].touch})})},le=W(function(e){console.log("SIGNUP");var t=Object(n.useReducer)(H,{loading:!1,error:null}),a=Object(u.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)({email:{type:"input",inputType:"email",config:{placeholder:"email address"},value:"",validRules:{required:!0,isEmail:!0},valid:!1,touch:!1},password:{type:"input",inputType:"password",config:{placeholder:"password"},value:"",validRules:{required:!0,minLength:6},valid:!1,touch:!1},comfirnPsw:{type:"input",inputType:"password",config:{placeholder:"comfirn password"},value:"",validRules:{required:!0,minLength:6},valid:!1,touch:!1}}),i=Object(u.a)(l,2),s=i[0],d=i[1],p=Object(n.useCallback)(function(e,t){var a=e.currentTarget.value;d(function(e){var n=Y(e[t],{value:a,valid:F(a,e[t].validRules),touch:!0});return Y(e,Object(z.a)({},t,n))})},[]),g=Object(n.useCallback)(function(t){var a,n,r,c,l,i;return m.a.async(function(u){for(;;)switch(u.prev=u.next){case 0:if(i=function(e){return e.password.value===e.comfirnPsw.value},l=function(e){var t=!1;return 0===Object.keys(e).filter(function(t){return!1===e[t].valid}).length&&(t=!0),t},c=function(e){return"200"===e.status||200===e.status},r=function(e){return Object.keys(e).map(function(t){return"email"===t||"password"===t?Object(z.a)({},t,e[t].value):{}}).reduce(function(e,t){return Object(D.a)({},e,{},t)},{})},o({type:"SEND"}),l(t)){u.next=8;break}return o({type:"ERROR",errorMessage:"\u586b\u5165\u8cc7\u6599\u4e0d\u6b63\u78ba,\u8acb\u6aa2\u67e5\u5f8c\u518d\u767c\u9001"}),u.abrupt("return");case 8:if(i(t)){u.next=11;break}return o({type:"ERROR",errorMessage:"\u5bc6\u78bc\u4e0d\u4e00\u81f4,\u8acb\u91cd\u65b0\u8f38\u5165\u5f8c\u518d\u767c\u9001"}),u.abrupt("return");case 11:return a=r(t),u.next=14,m.a.awrap(h(a));case 14:(n=u.sent)&&(c(n)?e.history.push("/signin"):(o({type:"ERROR",errorMessage:"\u5beb\u5165\u8cc7\u6599\u5931\u6557"}),console.log(n))),o({type:"RESPONSE"});case 17:case"end":return u.stop()}})},[e.history]),f=Object(n.useCallback)(function(){o({type:"CLEAR"})},[]);return r.a.createElement("div",{className:G.a.Signup},c.error&&r.a.createElement(ae,{show:!0,clicked:f},c.error),r.a.createElement("div",{className:G.a.wrap},r.a.createElement($,{className:G.a.card},r.a.createElement("div",{className:G.a.title},r.a.createElement("span",null,"\u8a3b\u518a"),r.a.createElement("div",{className:G.a.loading},c.loading&&r.a.createElement(ce,null))),r.a.createElement("div",null,r.a.createElement(oe,{data:s,changed:p})),r.a.createElement("div",{className:G.a.btns},r.a.createElement(T,{clicked:function(){return g(s)}},"\u9001\u51fa"),r.a.createElement(T,{clicked:function(){return e.history.push("/signin")}},"\u767b\u5165")))))},f.a),ie=a(14),ue=a.n(ie),se=W(function(e){console.log("SIGNIN");var t=Object(n.useReducer)(H,{loading:!1,error:null}),a=Object(u.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)({email:{type:"input",inputType:"email",config:{placeholder:"email address"},value:"",validRules:{required:!0,isEmail:!0},valid:!1,touch:!1},password:{type:"input",inputType:"password",config:{placeholder:"password"},value:"",validRules:{required:!0,minLength:6},valid:!1,touch:!1}}),i=Object(u.a)(l,2),s=i[0],d=i[1],p=Object(n.useCallback)(function(){o({type:"CLEAR"})},[]);return r.a.createElement("div",{className:ue.a.Signin},c.error&&r.a.createElement(ae,{show:!0,clicked:p},c.error),r.a.createElement("div",{className:ue.a.wrap},r.a.createElement($,{className:ue.a.card},r.a.createElement("div",{className:ue.a.title},r.a.createElement("span",null,"\u767b\u5165"),r.a.createElement("div",{className:ue.a.loading},c.loading&&r.a.createElement(ce,null))),r.a.createElement("div",null,r.a.createElement(oe,{data:s,changed:function(e,t){var a=e.currentTarget.value;d(function(e){var n=Y(e[t],{value:a,valid:F(a,e[t].validRules),touch:!0});return Y(e,Object(z.a)({},t,n))})}})),r.a.createElement("div",{className:ue.a.btns},r.a.createElement(T,{clicked:function(){return function(t){var a,n,r,c,l,i;return m.a.async(function(u){for(;;)switch(u.prev=u.next){case 0:if(i=function(t){localStorage.setItem("idToken",t),e.history.push("/")},l=function(e){var t=!1;return 0===Object.keys(e).filter(function(t){return!1===e[t].valid}).length&&(t=!0),t},c=function(e){return"200"===e.status||200===e.status},r=function(e){return Object.keys(e).map(function(t){return Object(z.a)({},t,e[t].value)}).reduce(function(e,t){return Object(D.a)({},e,{},t)},{})},o({type:"SEND"}),l(t)){u.next=8;break}return o({type:"ERROR",errorMessage:"\u586b\u5165\u8cc7\u6599\u4e0d\u6b63\u78ba,\u8acb\u6aa2\u67e5\u5f8c\u518d\u767c\u9001"}),u.abrupt("return");case 8:return a=r(t),u.next=11,m.a.awrap(_(a));case 11:(n=u.sent)&&(c(n)?i(n.data.idToken):o({type:"ERROR",errorMessage:"\u767b\u5165\u5931\u6557"})),o({type:"RESPONSE"});case 14:case"end":return u.stop()}})}(s)}},"\u9001\u51fa"),r.a.createElement(T,{clicked:function(){return e.history.push("/signup")}},"\u8a3b\u518a")))))},f.a),de=function(){return console.log("APP"),r.a.createElement("div",null,r.a.createElement(i.d,null,r.a.createElement(i.b,{path:"/",exact:!0,component:P}),r.a.createElement(i.b,{path:"/done",component:q}),r.a.createElement(i.b,{path:"/signup",component:le}),r.a.createElement(i.b,{path:"/signin",component:se}),r.a.createElement(i.a,{to:"/"})),r.a.createElement("div",{id:"global-modal"}))},pe=r.a.createElement(l.a,null,r.a.createElement(de,null));o.a.render(pe,document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.7776bb3a.chunk.js.map