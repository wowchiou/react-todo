(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t,n){e.exports={Signup:"Signup_Signup__3l2L_",wrap:"Signup_wrap__cnmpo",title:"Signup_title__Z-jWB",loading:"Signup_loading__19f_W",btns:"Signup_btns__3tHBz",popup:"Signup_popup__1i9Bu"}},14:function(e,t,n){e.exports={Signin:"Signin_Signin__29Qsq",wrap:"Signin_wrap__y1xxj",title:"Signin_title__D6oGa",loading:"Signin_loading__V8ytj",btns:"Signin_btns__30Syc",popup:"Signin_popup__36Lt4"}},17:function(e,t,n){e.exports={error:"withErrorHandler_error__1vxNE",show:"withErrorHandler_show__1AZKd",hide:"withErrorHandler_hide__GUCvq"}},18:function(e,t,n){e.exports={Backdrop:"Backdrop_Backdrop__26bb-",hide:"Backdrop_hide__1csbP",show:"Backdrop_show__OOqWn"}},21:function(e,t,n){e.exports={Modal:"Modal_Modal__2Nxic",fadeInDown:"Modal_fadeInDown__PIteE",close:"Modal_close__2LYPW"}},22:function(e,t,n){e.exports={loading:"Loading_loading__3hxUF","lds-ring":"Loading_lds-ring__1VIXi"}},23:function(e,t,n){e.exports={Input:"Input_Input__2gEm4",error:"Input_error__33xaI"}},36:function(e,t,n){e.exports={Button:"Button_Button__3Ur4h"}},37:function(e,t,n){e.exports={Card:"Card_Card__3yI8w"}},40:function(e,t,n){e.exports=n(69)},45:function(e,t,n){},69:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(16),i=n.n(c),l=n(20),o=(n(45),n(11)),u=n(36),s=n.n(u),d=r.a.memo(function(e){return console.log("Button"),r.a.createElement("button",{className:s.a.Button,disabled:e.disabled,onClick:e.clicked},e.children)}),p=r.a.memo(d),m=function(e){console.log("HOME");return r.a.createElement("div",null,r.a.createElement(p,{clicked:function(){localStorage.removeItem("idToken"),e.history.push("/signin")}},"\u767b\u51fa"))},g=n(5),f=n.n(g),E=n(8),v=n(9),h=n(6),_=n(13),b=n.n(_),w=n(10),y=n.n(w),k="AIzaSyAzWGnKUYY8e6g9oASL90g7tj4TjoVCRGg",O=(y.a.create({baseURL:"https://react-my-test-fb5ea.firebaseio.com/"}),function(e){var t;return f.a.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f.a.awrap(y.a.post("https://identitytoolkit.googleapis.com/v1/accounts:signUp?key="+k,e));case 2:return t=n.sent,n.abrupt("return",t);case 4:case"end":return n.stop()}})}),j=function(e){var t;return f.a.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f.a.awrap(y.a.post("https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key="+k,e));case 2:return t=n.sent,n.abrupt("return",t);case 4:case"end":return n.stop()}})},S=function(e,t){return Object(E.a)({},e,{},t)},R=function(e,t){var n=!0;if(!t)return!0;if(t.required&&!(n=""!==e.trim()&&n))return!1;if(t.minLength&&!(n=e.length>=t.minLength&&n))return!1;if(t.isEmail){if(!(n=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/.test(e)&&n))return!1}return!0},N=function(e,t){switch(t.type){case"SEND":return{loading:!0,error:null};case"RESPONSE":return Object(E.a)({},e,{loading:!1});case"ERROR":return{loading:!1,error:t.errorMessage};case"CLEAR":return{loading:!1,error:null};default:throw new Error("Somthing went wrong!")}},x=n(17),I=n.n(x),C=function(e,t){return function(n){var c=function(e){var t=Object(a.useState)(null),n=Object(h.a)(t,2),r=n[0],c=n[1],i=e.interceptors.request.use(function(e){return c(null),e}),l=e.interceptors.response.use(function(e){return e},function(e){c(e)});return Object(a.useEffect)(function(){return function(){e.interceptors.request.eject(i),e.interceptors.response.eject(l)}},[e.interceptors.request,e.interceptors.response,i,l]),[r,Object(a.useCallback)(function(){c(null)},[])]}(t),i=Object(h.a)(c,2),l=i[0],o=i[1],u=[I.a.error];return l?u.push(I.a.show):u.push(I.a.hide),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:u.join(" ")},r.a.createElement("p",null,l&&l.response.data.error.message),r.a.createElement(p,{clicked:o},"\u78ba\u8a8d")),r.a.createElement(e,n))}},B=n(37),L=n.n(B),T=function(e){return r.a.createElement("div",{className:L.a.Card},e.children)},M=n(18),P=n.n(M),q=function(e){var t=[P.a.Backdrop];return e.show?t.push(P.a.show):t.push(P.a.hide),r.a.createElement("div",{className:t.join(" "),onClick:e.clicked})},z=n(21),A=n.n(z),U=function(e){var t=window.document.getElementById("global-modal"),n=r.a.createElement(r.a.Fragment,null,r.a.createElement(q,{show:e.show,clicked:e.clicked}),r.a.createElement("div",{className:A.a.Modal},r.a.createElement("div",{className:A.a.close,onClick:e.clicked},r.a.createElement("span",null),r.a.createElement("span",null)),e.children));return Object(c.createPortal)(n,t)},D=n(22),G=n.n(D),W=function(){return r.a.createElement("div",{className:G.a.Loading},r.a.createElement("div",{className:G.a.loading},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null)))},H=n(23),F=n.n(H),V=function(e){console.log("Input");var t=[F.a.Input];!e.valid&&e.touch&&t.push(F.a.error);var n=r.a.createElement("p",null,"Input Error");switch(e.type){case"input":return r.a.createElement("input",Object.assign({className:t.join(" "),type:e.inputType,name:e.name},e.config,{value:e.value,onChange:e.changed}));case"select":case"textarea":return;default:return n}},Y=function(e){return Object.keys(e.data).map(function(t,n){return r.a.createElement(V,{key:t+n,type:e.data[t].type,inputType:e.data[t].inputType,name:t,config:e.data[t].config,changed:function(n){return e.changed(n,t)},value:e.data[t].value,valid:e.data[t].valid,touch:e.data[t].touch})})},J=C(function(e){console.log("SIGNUP");var t=Object(a.useReducer)(N,{loading:!1,error:null}),n=Object(h.a)(t,2),c=n[0],i=n[1],l=Object(a.useState)({email:{type:"input",inputType:"email",config:{placeholder:"email address"},value:"",validRules:{required:!0,isEmail:!0},valid:!1,touch:!1},password:{type:"input",inputType:"password",config:{placeholder:"password"},value:"",validRules:{required:!0,minLength:6},valid:!1,touch:!1},comfirnPsw:{type:"input",inputType:"password",config:{placeholder:"comfirn password"},value:"",validRules:{required:!0,minLength:6},valid:!1,touch:!1}}),o=Object(h.a)(l,2),u=o[0],s=o[1],d=Object(a.useCallback)(function(e,t){var n=e.currentTarget.value;s(function(e){var a=S(e[t],{value:n,valid:R(n,e[t].validRules),touch:!0});return S(e,Object(v.a)({},t,a))})},[]),m=Object(a.useCallback)(function(t){var n,a,r,c,l,o;return f.a.async(function(u){for(;;)switch(u.prev=u.next){case 0:if(o=function(e){return e.password.value===e.comfirnPsw.value},l=function(e){var t=!1;return 0===Object.keys(e).filter(function(t){return!1===e[t].valid}).length&&(t=!0),t},c=function(e){return"200"===e.status||200===e.status},r=function(e){return Object.keys(e).map(function(t){return"email"===t||"password"===t?Object(v.a)({},t,e[t].value):{}}).reduce(function(e,t){return Object(E.a)({},e,{},t)},{})},i({type:"SEND"}),l(t)){u.next=8;break}return i({type:"ERROR",errorMessage:"\u586b\u5165\u8cc7\u6599\u4e0d\u6b63\u78ba,\u8acb\u6aa2\u67e5\u5f8c\u518d\u767c\u9001"}),u.abrupt("return");case 8:if(o(t)){u.next=11;break}return i({type:"ERROR",errorMessage:"\u5bc6\u78bc\u4e0d\u4e00\u81f4,\u8acb\u91cd\u65b0\u8f38\u5165\u5f8c\u518d\u767c\u9001"}),u.abrupt("return");case 11:return n=r(t),u.next=14,f.a.awrap(O(n));case 14:(a=u.sent)&&(c(a)?e.history.push("/signin"):(i({type:"ERROR",errorMessage:"\u5beb\u5165\u8cc7\u6599\u5931\u6557"}),console.log(a))),i({type:"RESPONSE"});case 17:case"end":return u.stop()}})},[e.history]),g=Object(a.useCallback)(function(){i({type:"CLEAR"})},[]);return r.a.createElement("div",{className:b.a.Signup},c.error&&r.a.createElement(U,{show:!0,clicked:g},c.error),r.a.createElement("div",{className:b.a.wrap},r.a.createElement(T,{className:b.a.card},r.a.createElement("div",{className:b.a.title},r.a.createElement("span",null,"\u8a3b\u518a"),r.a.createElement("div",{className:b.a.loading},c.loading&&r.a.createElement(W,null))),r.a.createElement("div",null,r.a.createElement(Y,{data:u,changed:d})),r.a.createElement("div",{className:b.a.btns},r.a.createElement(p,{clicked:function(){return m(u)}},"\u9001\u51fa"),r.a.createElement(p,{clicked:function(){return e.history.push("/signin")}},"\u767b\u5165")))))},y.a),K=n(14),Z=n.n(K),$=C(function(e){console.log("SIGNIN");var t=Object(a.useReducer)(N,{loading:!1,error:null}),n=Object(h.a)(t,2),c=n[0],i=n[1],l=Object(a.useState)({email:{type:"input",inputType:"email",config:{placeholder:"email address"},value:"",validRules:{required:!0,isEmail:!0},valid:!1,touch:!1},password:{type:"input",inputType:"password",config:{placeholder:"password"},value:"",validRules:{required:!0,minLength:6},valid:!1,touch:!1}}),o=Object(h.a)(l,2),u=o[0],s=o[1],d=Object(a.useCallback)(function(){i({type:"CLEAR"})},[]);return r.a.createElement("div",{className:Z.a.Signin},c.error&&r.a.createElement(U,{show:!0,clicked:d},c.error),r.a.createElement("div",{className:Z.a.wrap},r.a.createElement(T,{className:Z.a.card},r.a.createElement("div",{className:Z.a.title},r.a.createElement("span",null,"\u767b\u5165"),r.a.createElement("div",{className:Z.a.loading},c.loading&&r.a.createElement(W,null))),r.a.createElement("div",null,r.a.createElement(Y,{data:u,changed:function(e,t){var n=e.currentTarget.value;s(function(e){var a=S(e[t],{value:n,valid:R(n,e[t].validRules),touch:!0});return S(e,Object(v.a)({},t,a))})}})),r.a.createElement("div",{className:Z.a.btns},r.a.createElement(p,{clicked:function(){return function(t){var n,a,r,c,l,o;return f.a.async(function(u){for(;;)switch(u.prev=u.next){case 0:if(o=function(t){localStorage.setItem("idToken",t),e.history.push("/")},l=function(e){var t=!1;return 0===Object.keys(e).filter(function(t){return!1===e[t].valid}).length&&(t=!0),t},c=function(e){return"200"===e.status||200===e.status},r=function(e){return Object.keys(e).map(function(t){return Object(v.a)({},t,e[t].value)}).reduce(function(e,t){return Object(E.a)({},e,{},t)},{})},i({type:"SEND"}),l(t)){u.next=8;break}return i({type:"ERROR",errorMessage:"\u586b\u5165\u8cc7\u6599\u4e0d\u6b63\u78ba,\u8acb\u6aa2\u67e5\u5f8c\u518d\u767c\u9001"}),u.abrupt("return");case 8:return n=r(t),u.next=11,f.a.awrap(j(n));case 11:(a=u.sent)&&(c(a)?o(a.data.idToken):i({type:"ERROR",errorMessage:"\u767b\u5165\u5931\u6557"})),i({type:"RESPONSE"});case 14:case"end":return u.stop()}})}(u)}},"\u9001\u51fa"),r.a.createElement(p,{clicked:function(){return e.history.push("/signup")}},"\u8a3b\u518a"),r.a.createElement("p",null,"test")))))},y.a),Q=function(){return console.log("APP"),r.a.createElement("div",null,r.a.createElement(o.d,null,localStorage.getItem("idToken")&&r.a.createElement(o.b,{path:"/",exact:!0,component:m}),r.a.createElement(o.b,{path:"/signup",component:J}),r.a.createElement(o.b,{path:"/signin",component:$}),r.a.createElement(o.a,{to:"/signin"})),r.a.createElement("div",{id:"global-modal"}))},X=r.a.createElement(l.a,null,r.a.createElement(Q,null));i.a.render(X,document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.85376ef7.chunk.js.map